(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{222:function(e,t){},273:function(e,t,n){},465:function(e,t){},466:function(e,t){},479:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),c=n.n(a),o=n(37),i=n.n(o),s=n(39),u=n(77),l=n(51),d=n(15),j=(n(272),n(258)),b=(n(273),{TODO:[1,2,3,4,5,6,7,8],ADMINISTRADOR:1,JEFE_OPERACIONES:2,JEFE_LOGISTICA:3,LIDER_GESTION:4,ASISTENTE_LOGISTICA:5,JEFE_CONTRATA:6,GESTOR:7,ALMACENERO:8,AUDITOR:9,TECNICO:10}),f={login:"/login",dashboard:"/dashboard",listaPersonal:"/lista-personal",listaContratas:"/lista-contratas",listaRutas:"/lista-rutas",adminAveriasHfc:"/administrar-ordenes/averias-hfc",adminAltasHfc:"/administrar-ordenes/altas-hfc",adminBasicas:"/administrar-ordenes/basicas",adminspeedy:"/administrar-ordenes/speedy",gestionarAveriasHfc:"/gestionar-ordenes/averias-hfc",gestionarAltasHfc:"/gestionar-ordenes/altas-hfc",gestionarBasicas:"/gestionar-ordenes/basicas",gestionarspeedy:"/gestionar-ordenes/speedy"},O={todos:b.TODO,listaContratas:[b.ADMINISTRADOR,b.JEFE_OPERACIONES,b.JEFE_LOGISTICA,b.LIDER_GESTION],grupoOperativa:[b.ADMINISTRADOR,b.JEFE_OPERACIONES,b.JEFE_LOGISTICA,b.LIDER_GESTION,b.JEFE_CONTRATA,b.GESTOR],administrarOrdenes:[b.ADMINISTRADOR,b.JEFE_OPERACIONES,b.LIDER_GESTION],gestionarOrdenes:[b.ADMINISTRADOR,b.JEFE_OPERACIONES,b.LIDER_GESTION,b.GESTOR]};function p(){return Object(r.jsx)("div",{children:Object(r.jsx)("a",{href:f.login,children:"login"})})}var h=n(8),m=n.n(h),x=n(11),g=n(63),v=n.n(g),E=n(481),w=n(482),_=n(488),y=n(493),C=n(52),I=n(499),S=n(500),T=n(182),A=n.n(T),k=n(53),N={urlApi:"http://192.168.100.90:5000/api",public:"http://192.168.100.90:5000/",TOKEN_STORAGE_KEY:"atenea.authToken",logoPath:"/icon.png",logoFull:"/iconL.png",version:"0.0.2",formatosAdmitidos:["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]},R=function(){var e=Object(x.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k.a.loading("Iniciando sesi\xf3n...",{hideAfter:0,position:"top-right",role:"success"}),r=A.a.create({baseURL:N.urlApi}),e.next=4,r(Object(s.a)({},t)).then((function(e){var t=e.data;if(n.hide(),t&&t.data)return k.a.success(t.message,{position:"top-right"}),{data:t.data,errors:!1};throw k.a.error("No se puede obtener la data",{position:"top-right"}),Error("No se puede obtener la data")})).catch((function(e){if(n.hide(),e.response){console.log(e.response);var t=e.response.data,r=void 0!==t[Object.keys(t)[0]]?t[Object.keys(t)[0]]:"Error en la solicitud.";return k.a.warn(r,{position:"top-right"}),{data:!1,errors:t}}throw e.request?(console.log(e.request),k.a.warn("Se realiz\xf3 la solicitud, pero no se recibi\xf3 respuesta.",{position:"top-right"}),e):(k.a.error("Algo sucedi\xf3 al configurar la solicitud que provoc\xf3 un error.",{position:"top-right"}),e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(x.a)(m.a.mark((function e(t,n){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&(r=k.a.loading("Cargando...",{hideAfter:0,position:"top-right",role:"success"})),a=A.a.create({baseURL:N.urlApi,headers:{Authorization:"Bearer "+v.a.get(N.TOKEN_STORAGE_KEY)}}),e.next=4,a(Object(s.a)({},t)).then((function(e){var t=e.data;return n&&(r.hide(),k.a[t.status?t.status:"error"](t.message,{position:"top-right"})),t})).catch((function(e){if(n&&r.hide(),e.response){var t=e.response.data;return"401"===String(e.response.status)?(k.a.error("Token Invalido, cerrando sesi\xf3n.",{position:"top-right"}),v.a.remove(N.TOKEN_STORAGE_KEY),document.location.href="/login"):k.a.warn(void 0!==t.message?t.message:"Error en la solicitud.",{position:"top-right"}),{data:null,errors:t}}throw e.request?(console.log(e.request),k.a.warn("Se realiz\xf3 la solicitud, pero no se recibi\xf3 respuesta.",{position:"top-right"}),e):(k.a.error("Algo sucedi\xf3 al configurar la solicitud que provoc\xf3 un error.",{position:"top-right"}),e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R({url:"private/auth/login",method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D({url:"private/auth/session",method:"GET"},t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(x.a)(m.a.mark((function e(){var t,n=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(n.length>0&&void 0!==n[0])||n[0],e.abrupt("return",D({url:"private/auth/logout",method:"GET"},t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=n(107),z=n(108),P=n(223),B=function(){function e(t){Object(L.a)(this,e),this.decodedToken={nombre:null,id:null,cargo:null,imagen:null,gestor:null,exp:0};try{t&&(this.decodedToken=Object(P.a)(t))}catch(n){console.log("Error"),console.log(n)}}return Object(z.a)(e,[{key:"isValid",get:function(){return!this.isExpired}},{key:"expiresAt",get:function(){return new Date(1e3*this.decodedToken.exp)}},{key:"isExpired",get:function(){return new Date>this.expiresAt}},{key:"authorizationString",get:function(){return"Bearer ".concat(this.token)}}]),e}();function H(){var e=Object(l.f)();function t(){return(t=Object(x.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(n).then((function(t){t.data&&!t.errors&&(v.a.set(N.TOKEN_STORAGE_KEY,t.data),e.push(f.dashboard))})).catch((function(e){console.log("error"),console.log(e)}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){new B(v.a.get(N.TOKEN_STORAGE_KEY)).isValid&&e.push(f.dashboard)}),[e]),Object(r.jsx)("div",{children:Object(r.jsx)(E.a,{type:"flex",justify:"space-around",align:"middle",style:{backgroundColor:"rgb(242, 242, 247)",height:"100vh"},children:Object(r.jsx)(w.a,{xs:20,sm:12,md:8,lg:6,xl:5,children:Object(r.jsx)("div",{className:"contenedor-padre",children:Object(r.jsxs)(_.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(e){return t.apply(this,arguments)},children:[Object(r.jsx)("div",{className:"logoForm"}),Object(r.jsx)(_.a.Item,{name:"username",hasFeedback:!0,rules:[{required:!0,message:"\xa1Se necesita una correo!"},{type:"email",message:"\xa1Ingresa un email v\xe1lido!"}],children:Object(r.jsx)(y.a,{autoComplete:"current-email",type:"email",prefix:Object(r.jsx)(I.a,{className:"site-form-item-icon"}),placeholder:"Correo"})}),Object(r.jsx)(_.a.Item,{name:"password",hasFeedback:!0,rules:[{required:!0,message:"\xa1Se necesita una contrase\xf1a v\xe1lida!"},{min:6,message:"\xa1La contrase\xf1a debe tener mas de 6 car\xe1cteres!"}],children:Object(r.jsx)(y.a.Password,{autoComplete:"current-password",prefix:Object(r.jsx)(S.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Contrase\xf1a"})}),Object(r.jsx)(_.a.Item,{children:Object(r.jsx)(C.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"Acceder"})})]})})})})})}var Y=n(9),V=n(3),U=n.n(V),q=n(154),K=n(483),J=n(54),W=n(501),Q=n(502),Z=n(503),X=n(504),$=n(505),ee=n(506),te=n(82),ne=te.a.SubMenu,re=te.a.Item,ae=te.a.Divider,ce=te.a.ItemGroup,oe=function(){return String(window.location.pathname).substring(1)},ie=[{permisos:[].concat(Object(J.a)(O.todos),[9]),titulo:"Panel de Control",children:[{grupo:!1,ruta:f.dashboard,icon:W.a,permisos:O.todos,titulo:"Dashboard"}]},{permisos:O.todos,titulo:"Usuarios y Contratas",children:[{grupo:!1,ruta:f.listaPersonal,icon:Q.a,permisos:O.todos,titulo:"Lista de Personal"},{grupo:!1,ruta:f.listaContratas,icon:Z.a,permisos:O.listaContratas,titulo:"Lista de Contratas"}]},{permisos:O.grupoOperativa,titulo:"Operativa",children:[{grupo:!1,ruta:f.listaRutas,icon:X.a,permisos:O.administrarOrdenes,titulo:"Lista Rutas"},{grupo:!0,key:"sub1",icon:$.a,titulo:"Administrar ordenes",permisos:O.administrarOrdenes,children:[{ruta:f.adminAveriasHfc,icon:$.a,titulo:"Averias Hfc"},{ruta:f.adminAltasHfc,icon:$.a,titulo:"Altas Hfc"},{ruta:f.adminBasicas,icon:$.a,titulo:"Basicas"},{ruta:f.adminspeedy,icon:$.a,titulo:"Speedy"}]},{grupo:!0,key:"sub2",icon:ee.a,titulo:"Gestionar ordenes",permisos:O.gestionarOrdenes,children:[{ruta:f.gestionarAveriasHfc,icon:ee.a,titulo:"Averias Hfc"},{ruta:f.gestionarAltasHfc,icon:ee.a,titulo:"Altas Hfc"},{ruta:f.gestionarBasicas,icon:ee.a,titulo:"Basicas"},{ruta:f.gestionarspeedy,icon:ee.a,titulo:"Speedy"}]}]}];var se=function(e){var t=e.cargo;return t?Object(r.jsx)(te.a,{theme:"light",mode:"inline",defaultSelectedKeys:oe(),children:ie.map((function(e,n){return e.permisos.includes(t)?Object(r.jsxs)(ce,{title:e.titulo,children:[Object(r.jsx)(ae,{}),e.children.map((function(e){return!e.grupo&&e.permisos.includes(t)?Object(r.jsx)(re,{children:Object(r.jsxs)(u.b,{to:e.ruta,children:[Object(r.jsx)(e.icon,{}),Object(r.jsx)("span",{children:e.titulo})]})},String(e.ruta).substring(1)):e.grupo&&e.permisos.includes(t)?Object(r.jsx)(ne,{title:Object(r.jsxs)("span",{children:[Object(r.jsx)(e.icon,{}),Object(r.jsx)("span",{children:e.titulo})]}),children:e.children.map((function(e){return Object(r.jsx)(re,{children:Object(r.jsxs)(u.b,{to:e.ruta,children:[Object(r.jsx)(e.icon,{}),Object(r.jsx)("span",{children:e.titulo})]})},String(e.ruta).substring(1))}))},e.key):null}))]},n):null}))}):Object(r.jsx)(te.a,{theme:"light",mode:"inline",defaultSelectedKeys:oe(),children:Object(r.jsxs)(ce,{title:"Panel de Control",children:[Object(r.jsx)(ae,{}),Object(r.jsx)(re,{children:Object(r.jsxs)(u.b,{to:f.dashboard,children:[Object(r.jsx)(W.a,{}),Object(r.jsx)("span",{children:"Dashboard"})]})},"dashboard")]})})},ue=K.a.Sider,le=function(e){var t=e.collapsed,n=e.cargo;return Object(r.jsxs)(ue,{width:256,theme:"light",breakpoint:"lg",trigger:null,collapsible:!0,collapsed:t,className:"sider",children:[Object(r.jsx)("div",{className:"brand",children:t?Object(r.jsx)("div",{className:"logo",children:Object(r.jsx)("img",{alt:"logo",src:N.logoPath})}):Object(r.jsx)("div",{className:"full-logo",children:Object(r.jsx)("img",{alt:"full-logo",src:N.logoFull})})}),Object(r.jsx)("div",{className:"menu-container",children:Object(r.jsx)(se,{cargo:n})})]})},de=n(511),je=n(512),be=n(263),fe=n(497),Oe=n(494),pe=n(507),he=n(508),me=[{title:"Hola",icon:"success"},{title:"Hola",icon:"error"},{title:"Hola",icon:"warning"}],xe=function(){var e=Object(a.useState)(!1),t=Object(Y.a)(e,2),n=t[0],c=t[1];return Object(r.jsx)(be.a,{trigger:"click",placement:"bottomRight",overlayClassName:"notification-popover",visible:n,onVisibleChange:function(e){return c(e)},content:Object(r.jsxs)("div",{className:"caja-notificaciones",style:{minWidth:"20rem"},children:[Object(r.jsx)(fe.b,{itemLayout:"horizontal",dataSource:me,locale:{emptyText:Object(r.jsx)("span",{children:"You have viewed all notifications."})},renderItem:function(e){return Object(r.jsxs)(fe.b.Item,{className:"item-notificaciones",children:[Object(r.jsx)(fe.b.Item.Meta,{className:"datos-notificaciones",title:Object(r.jsx)("span",{lines:1,children:"Orden Actualizada"}),description:"hola k tal como te va"}),Object(r.jsx)(pe.a,{className:"flecha-notificaciones"})]})}}),me.length?Object(r.jsx)("div",{className:"clear-button",children:Object(r.jsx)("span",{children:"Limpiar Notificaciones"})}):null]}),children:Object(r.jsx)(Oe.a,{count:0,dot:!0,offset:[-10,10],className:"icon-button",children:Object(r.jsx)(he.a,{className:"icon-font"})})})},ge=n(259),ve=n(490),Ee=n(509),we=n(510);function _e(){var e=Object(a.useState)(null),t=Object(Y.a)(e,2),n=t[0],c=t[1],o=Object(l.f)();Object(a.useEffect)((function(){var e=new B(v.a.get(N.TOKEN_STORAGE_KEY));e&&c(e.decodedToken)}),[]);var i=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M().then(function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"error"!==t.status&&(v.a.remove(N.TOKEN_STORAGE_KEY),o.push("/login"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),console.log("Error cerrando sesi\xf3n.")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(te.a,{mode:"horizontal",children:Object(r.jsxs)(te.a.SubMenu,{title:Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)("span",{style:{color:"#999",marginRight:4},children:Object(r.jsx)("span",{children:"Hola,"})}),Object(r.jsx)("span",{children:n&&n.nombre}),Object(r.jsx)(ge.a,{style:{marginLeft:8},src:n&&n.imagen})]}),children:[Object(r.jsx)(te.a.Item,{children:Object(r.jsx)(ve.a.Text,{type:"sucess",children:Object(r.jsxs)(u.b,{to:"/atenea-system/perfil-usuario",children:[Object(r.jsx)(Ee.a,{}),"Configuraciones"]})})},"Configuraciones"),Object(r.jsx)(te.a.Item,{onClick:i,children:Object(r.jsxs)(ve.a.Text,{type:"danger",children:[Object(r.jsx)(we.a,{}),"Desconectar"]})},"SignOut")]})},"user")}var ye=n(167),Ce=n(164);var Ie,Se=(Ie=function(e){var t=e.children,n=e.spinLoading,c=e.cargo,o=Object(a.useState)(!1),i=Object(Y.a)(o,2),s=i[0],u=i[1],l={backgroundColor:"white",width:"100%",margin:"0px",padding:"16px 16px 24px 10px",transition:"margin .2s",clear:"both",left:s?"80px":"256px",bottom:0,right:0};return Object(r.jsx)(q.a,{spinning:n,tip:"Cargando Interfaz...",size:"large",className:"spin-container",children:Object(r.jsxs)(K.a,{children:[Object(r.jsx)(le,{collapsed:s,cargo:c}),Object(r.jsxs)(K.a,{className:"site-layout",children:[Object(r.jsxs)(K.a.Header,{className:U()("header",{collapsed:s}),id:"layoutHeader",children:[Object(r.jsx)("div",{className:"button",onClick:function(){return u(!s)},children:s?Object(r.jsx)(de.a,{className:"text-primary"}):Object(r.jsx)(je.a,{})}),Object(r.jsxs)("div",{className:"right-container",children:[Object(r.jsx)(xe,{}),Object(r.jsx)(_e,{})]})]}),Object(r.jsx)(K.a.Content,{className:"site-layout-background",style:{minHeight:"calc(100vh - 94px - 3rem)",marginTop:".5rem",transition:"margin .2s"},children:t}),Object(r.jsxs)(K.a.Footer,{style:l,children:["Atenea System v",N.version," - 2020\xa9"]})]})]})})},function(e){Object(ye.a)(n,e);var t=Object(Ce.a)(n);function n(e){var r;return Object(L.a)(this,n),(r=t.call(this,e)).state={spin:!0,cargo:null},r}return Object(z.a)(n,[{key:"componentDidMount",value:function(){var e=Object(x.a)(m.a.mark((function e(){var t,n,r=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.a.get(N.TOKEN_STORAGE_KEY)){e.next=5;break}document.location.href=f.login,e.next=8;break;case 5:return n=new B(t),e.next=8,G(!0).then((function(e){"error"===e.status?(v.a.remove(N.TOKEN_STORAGE_KEY),document.location.href=f.login):r.setState({spin:!1,cargo:n.decodedToken.cargo})})).catch((function(e){r.setState({spin:!1}),console.log(e),console.log("error de sesion en (PrivateRoutes)")}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(r.jsx)(Ie,Object(s.a)(Object(s.a)({},this.props),{},{spinLoading:this.state.spin,cargo:this.state.cargo}))}}]),n}(a.Component)),Te=n(492),Ae=function(e){var t=e.titulo,n=[{breadcrumbName:e.subtitulo}];return Object(r.jsx)(Te.a,{className:"site-page-header",title:t,breadcrumb:{routes:n}})};function ke(e){var t=e.children;return Object(r.jsx)(E.a,{style:{margin:"0 24px 1rem",borderRadius:".3rem"},children:Object(r.jsx)(w.a,{span:24,style:{borderRadius:".3rem",padding:"0 1rem",backgroundColor:"#fff",WebkitBoxShadow:"0px 0px 10px 0px rgba(0,0,0,0.03)",MozBoxShadow:"0px 0px 10px 0px rgba(0,0,0,0.03)",boxShadow:"0px 0px 10px 0px rgba(0,0,0,0.03)"},children:t})})}var Ne=n(489),Re=n(30),De=n.n(Re),Fe=n(159),Ge=n(56);function Me(e){var t=e.data;return e.loading?Object(r.jsx)("div",{children:"cargando..."}):Object(r.jsxs)(Ge.Chart,{height:250,data:t,autoFit:!0,padding:[20,40,20,100],children:[Object(r.jsx)(Ge.Legend,{visible:!1}),Object(r.jsx)(Ge.Tooltip,{showMarkers:!0}),Object(r.jsx)(Ge.Axis,{name:"ordenes"}),Object(r.jsx)(Ge.Facet,{fields:["bucket"],type:"rect",columnTitle:{offsetY:-15,style:{fontSize:14,fontWeight:300,fill:"#8d8d8d"}},eachView:function(e,t){e.coordinate().transpose(),0===t.columnIndex?(e.axis("estado",{tickLine:null,line:null}),e.axis("ordenes",!1)):e.axis(!1);var n,r="BK_MA_SM_MAGDALENA_02"===(n=t.columnValue)?"#1890ff":"BK_MR_SM_PN_SJ_MARANGA"===n?"#2fc25b":"BK_SV_MA_MAGDALENA_01"===n?"#facc14":"BK_SJ_SAN_JOSE"===n?"#14E9FA":void 0;e.interval().adjust("stack").position("estado*ordenes").color("type",[r,"#ebedf0"]).size(20).label("ordenes*type",(function(e,t){return 2===t?null:{offset:e<20?10:-4}})),e.interaction("element-active")}})]})}var Le="averiashfc",ze="altashfc",Pe=function(){var e=Object(x.a)(m.a.mark((function e(t,n){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.metodo,a=n.tipo,e.abrupt("return",D({url:"ordenes",method:"GET",params:{metodo:r,tipo:a}},t));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Be=function(){var e=Object(x.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.tipo,e.abrupt("return",D({url:"ordenes/actividades",method:"GET",params:{tipo:r}},t));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),He=function(){var e=Object(x.a)(m.a.mark((function e(t){var n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.metodo,r=t.ordenes,a=t.orden,e.abrupt("return",D({url:"ordenes",method:"POST",data:{ordenes:r,metodo:n,orden:a}},!0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=["Reparaci\xf3n GPON","Reparaci\xf3n Gpon Movistar Uno","Reparacion Movistar Total Gpon","Instalaci\xf3n Rutina VA Gpon","Rutina MT GPON MT","Rutina MT GPON MT","Rutina VA GPON MT","Traslado GPON","Instalaci\xf3n rutina MT Gpon","Instalaci\xf3n rutina Bucle Gpon","Traslado GPON Movistar Total","Instalaci\xf3n Movistar uno Gpon","Instalaci\xf3n Gpon Movistar Tot","Instalaci\xf3n Migraci\xf3n Gpon","Instalaci\xf3n Migraci\xf3n Gpon MT","Instalaci\xf3n Migraci\xf3n Gpon MT","Instalaci\xf3n Gpon New","Instalaci\xf3n Movistar uno Gpon","Instalaci\xf3n Gpon Movistar Tot","Instalaci\xf3n Migraci\xf3n HFC a Gpon","Instalaci\xf3n Migraci\xf3n HFC a Gpon CC","Instalaci\xf3n Migraci\xf3n HFC a Gpon CC","Instalaci\xf3n Migraci\xf3n HFC a Gpon"];function Ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];if(e&&0!==e.length){var n=[],r=0,a=[],c=[];return e.forEach((function(e){return t.includes(e.bucket)?null:t.push(e.bucket)})),e.forEach((function(e){return n.includes(e.estado)?null:n.push(e.estado)})),t.forEach((function(t){n.forEach((function(n){var c=e.filter((function(e){return e.bucket===t&&e.estado===n})).length;r<c&&(r=c),a.push({bucket:t,estado:n,ordenes:c,type:1})}))})),a.forEach((function(e){var t={bucket:e.bucket,estado:e.estado,ordenes:r-e.ordenes,type:2};c.push(e),c.push(t)})),{ordenes:c,buckets:t}}return{ordenes:[],buckets:t}}function Ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];if(e&&0!==e.length){var n=[],r=0,a=[],c=[];return e.forEach((function(e){"-"!==e.tecnico&&e.tecnico.gestor&&e.tecnico.gestor.nombre?t.includes(e.tecnico.gestor.nombre)||t.push(e.tecnico.gestor.nombre):t.includes("-")||t.push("-")})),e.forEach((function(e){return n.includes(e.estado)?null:n.push(e.estado)})),t.forEach((function(t){n.forEach((function(n){var c=e.filter((function(e){return"-"===e.tecnico?e.tecnico===t&&e.estado===n:!!(e.tecnico&&e.tecnico.gestor&&e.tecnico.gestor.nombre)&&(e.tecnico.gestor.nombre===t&&e.estado===n)})).length;r<c&&(r=c),a.push({gestor:t,estado:n,ordenes:c,type:1})}))})),a.forEach((function(e){var t={gestor:e.gestor,estado:e.estado,ordenes:r-e.ordenes,type:2};c.push(e),c.push(t)})),{ordenes:c,gestores:t}}return{ordenes:[],gestores:t}}function qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];if(e&&0!==e.length){var n=[],r=0,a=[],c=[];return e.forEach((function(e){"-"!==e.tecnico&&e.tecnico.gestor&&e.tecnico.gestor.nombre?t.includes(e.tecnico.gestor.nombre)||t.push(e.tecnico.gestor.nombre):t.includes("-")||t.push("-")})),e.forEach((function(e){return n.includes(e.motivo_no_realizado)?null:n.push(e.motivo_no_realizado)})),t.forEach((function(t){n.forEach((function(n){var c=e.filter((function(e){return"-"===e.tecnico?e.tecnico===t&&e.motivo_no_realizado===n:!!(e.tecnico&&e.tecnico.gestor&&e.tecnico.gestor.nombre)&&(e.tecnico.gestor.nombre===t&&e.motivo_no_realizado===n)})).length;r<c&&(r=c),a.push({gestor:t,motivo:n,ordenes:c,type:1})}))})),a.forEach((function(e){var t={gestor:e.gestor,motivo:e.motivo,ordenes:r-e.ordenes,type:2};c.push(e),c.push(t)})),{ordenes:c,gestores:t}}return{ordenes:[],gestores:t}}function Ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length>0?e.map((function(e){return{bucket:e.bucket,requerimiento:e.requerimiento,estado:e.estado,fecha_cita:e.fecha_cita,motivo_no_realizado:e.motivo_no_realizado,subtipo_actividad:e.subtipo_actividad,carnet:"-"===e.tecnico?"-":e.tecnico.carnet,tecnico:"-"!==e.tecnico?e.tecnico.nombre+" "+e.tecnico.apellidos:"-",gestor:"-"===e.tecnico?"-":e.tecnico.gestor?e.tecnico.gestor.nombre+" "+e.tecnico.gestor.apellidos:"-",auditor:"-"===e.tecnico?"-":e.tecnico.auditor?e.tecnico.auditor.nombre+" "+e.tecnico.auditor.apellidos:"-",contrata:"-"===e.tecnico?"-":e.tecnico.contrata?e.tecnico.contrata.nombre:"-",tipo_agenda:e.tipo_agenda,sla_inicio:e.sla_inicio,sla_fin:e.sla_fin}})):{bucket:"",requerimiento:"",estado:"",fecha_cita:"",motivo_no_realizado:"",subtipo_actividad:"",carnet:"",tecnico:"",gestor:"",auditor:"",contrata:"",tipo_agenda:"",sla_inicio:"",sla_fin:""}}var Je=ve.a.Title,We=c.a.memo((function(e){var t=e.prueba,n=Object(a.useState)([]),c=Object(Y.a)(n,2),o=c[0],i=c[1],s=Object(a.useState)([]),u=Object(Y.a)(s,2),l=u[0],d=u[1],j=Object(a.useState)(!1),b=Object(Y.a)(j,2),f=b[0],O=b[1],p=Object(a.useState)([]),h=Object(Y.a)(p,2),g=h[0],v=h[1],_=Object(a.useState)(null),y=Object(Y.a)(_,2),I=(y[0],y[1]),S=Object(Fe.useJsonToCsv)().saveAsCsv;function T(){return A.apply(this,arguments)}function A(){return(A=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,Be(!0,{tipo:Le}).then((function(e){var t=e.data.filter((function(e){return Ye.includes(e.subtipo_actividad)}));return i(Ke(t)),t})).then((function(e){return Ve(e)})).then((function(e){var t=e.ordenes,n=e.buckets;v(n),d(t)})).catch((function(e){return console.log(e)})).finally((function(){I(De()(new Date).format("HH:mm")),O(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){O(!0),setTimeout((function(){O(!1),console.log(t)}),1e3)}),[t]),Object(a.useEffect)((function(){T()}),[]);var k={bucket:"Bucket",requerimiento:"Requerimiento",estado:"Estado",fecha_cita:"Fecha Cita",motivo_no_realizado:"Motivo No Realizado",subtipo_actividad:"Subtipo Actividad",carnet:"Carnet",tecnico:"Tecnico",gestor:"Gestor",auditor:"auditor",contrata:"Contrata",tipo_agenda:"Time Slot",sla_inicio:"SLA_INICIO",sla_fin:"SLA_FIN"};return Object(r.jsxs)("div",{children:[Object(r.jsx)(Je,{level:2,style:{marginTop:"1rem"},children:"Indicador Averias Gpon"}),Object(r.jsxs)(E.a,{style:{marginTop:"2rem",marginBottom:".5rem"},children:[Object(r.jsx)(w.a,{sm:16,children:Object(r.jsx)(Me,{data:l,loading:f})}),Object(r.jsxs)(w.a,{sm:8,children:[Object(r.jsx)(E.a,{children:g&&g.length>0?g.map((function(e,t){return Object(r.jsx)(w.a,{style:{margin:"1rem"},children:Object(r.jsx)(Ne.a,{title:e,value:o.length>0?o.filter((function(t){return t.bucket===e})).length:0,suffix:"/ ".concat(o.length," total")})},t)})):null}),Object(r.jsxs)(E.a,{children:[Object(r.jsx)(C.a,{onClick:T,style:{marginRight:".5rem"},children:"Click"}),Object(r.jsx)(C.a,{onClick:function(){return S({data:o,fields:k,filename:"data_altas_gpon_".concat(De()().format("DD_MM_YY_HH_mm"))})},children:"Exportar"})]})]})]})]})})),Qe=ve.a.Title,Ze=c.a.memo((function(e){var t=e.prueba,n=Object(a.useState)([]),c=Object(Y.a)(n,2),o=c[0],i=c[1],s=Object(a.useState)([]),u=Object(Y.a)(s,2),l=u[0],d=u[1],j=Object(a.useState)(!1),b=Object(Y.a)(j,2),f=b[0],O=b[1],p=Object(a.useState)([]),h=Object(Y.a)(p,2),g=h[0],v=h[1],_=Object(a.useState)(null),y=Object(Y.a)(_,2),I=(y[0],y[1]),S=Object(Fe.useJsonToCsv)().saveAsCsv;function T(){return A.apply(this,arguments)}function A(){return(A=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,Be(!0,{tipo:ze}).then((function(e){var t=e.data.filter((function(e){return Ye.includes(e.subtipo_actividad)}));return i(Ke(t)),t})).then((function(e){return Ve(e)})).then((function(e){var t=e.ordenes,n=e.buckets;v(n),d(t)})).catch((function(e){return console.log(e)})).finally((function(){I(De()(new Date).format("HH:mm")),O(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){O(!0),setTimeout((function(){O(!1),console.log(t)}),1e3)}),[t]),Object(a.useEffect)((function(){T()}),[]);var k={bucket:"Bucket",requerimiento:"Requerimiento",estado:"Estado",fecha_cita:"Fecha Cita",motivo_no_realizado:"Motivo No Realizado",subtipo_actividad:"Subtipo Actividad",carnet:"Carnet",tecnico:"Tecnico",gestor:"Gestor",auditor:"auditor",contrata:"Contrata",tipo_agenda:"Time Slot",sla_inicio:"SLA_INICIO",sla_fin:"SLA_FIN"};return Object(r.jsxs)("div",{children:[Object(r.jsx)(Qe,{level:2,style:{marginTop:"1rem"},children:"Indicador Altas Gpon"}),Object(r.jsxs)(E.a,{style:{marginTop:"2rem",marginBottom:".5rem"},children:[Object(r.jsx)(w.a,{sm:16,children:Object(r.jsx)(Me,{data:l,loading:f})}),Object(r.jsxs)(w.a,{sm:8,children:[Object(r.jsx)(E.a,{children:g&&g.length>0?g.map((function(e,t){return Object(r.jsx)(w.a,{style:{margin:"1rem"},children:Object(r.jsx)(Ne.a,{title:e,value:o.length>0?o.filter((function(t){return t.bucket===e})).length:0,suffix:"/ ".concat(o.length," total")})},t)})):null}),Object(r.jsxs)(E.a,{children:[Object(r.jsx)(C.a,{onClick:T,style:{marginRight:".5rem"},children:"Click"}),Object(r.jsx)(C.a,{onClick:function(){return S({data:o,fields:k,filename:"data_altas_gpon_".concat(De()().format("DD_MM_YY_HH_mm"))})},children:"Exportar"})]})]})]})]})})),Xe=["#1890ff","#2fc25b","#facc14","#14E9FA","#FF8818","#4618FF","#6DF719","#C018FF","#18B7FF","#F4A460","#6495ED","#00CED1","#1890ff","#2fc25b","#facc14","#14E9FA","#FF8818","#4618FF","#6DF719","#C018FF","#18B6FF","#F4A460","#6495ED","#00CED1"];function $e(e){var t=e.data,n=e.loading,a=e.gestores;return n?Object(r.jsx)("div",{children:"cargando..."}):Object(r.jsxs)(Ge.Chart,{height:250,data:t,autoFit:!0,padding:[20,5,10,75],children:[Object(r.jsx)(Ge.Legend,{visible:!1}),Object(r.jsx)(Ge.Tooltip,{showMarkers:!0}),Object(r.jsx)(Ge.Axis,{name:"ordenes"}),Object(r.jsx)(Ge.Facet,{fields:["gestor"],type:"rect",columnTitle:{offsetY:-15,style:{fontSize:11,fontWeight:300,fill:"#8d8d8d"}},eachView:function(e,t){e.coordinate().transpose(),0===t.columnIndex?(e.axis("estado",{tickLine:null,line:null}),e.axis("ordenes",!1)):e.axis(!1);var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e||0!==t.length){var n=t.findIndex((function(t){return t===e}));return n>-1?Xe[n]:"#fff"}return"#fff"}(t.columnValue,a);e.interval().adjust("stack").position("estado*ordenes").color("type",[n,"#ebedf0"]).size(20).label("ordenes*type",(function(e,t){return 2===t?null:{offset:e<10?10:-4}})),e.interaction("element-active")}})]})}var et=ve.a.Title,tt=c.a.memo((function(e){var t=e.prueba,n=Object(a.useState)([]),c=Object(Y.a)(n,2),o=c[0],i=c[1],s=Object(a.useState)([]),u=Object(Y.a)(s,2),l=u[0],d=u[1],j=Object(a.useState)(!1),b=Object(Y.a)(j,2),f=b[0],O=b[1],p=Object(a.useState)([]),h=Object(Y.a)(p,2),g=h[0],v=h[1],_=Object(a.useState)(null),y=Object(Y.a)(_,2),I=(y[0],y[1]);function S(){return T.apply(this,arguments)}function T(){return(T=Object(x.a)(m.a.mark((function e(){var t,n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),t=[],e.next=4,Be(!1,{tipo:ze}).then((function(e){return e.data.filter((function(e){return Ye.includes(e.subtipo_actividad)}))})).catch((function(e){return console.log(e)}));case 4:return n=e.sent,e.next=7,Be(!1,{tipo:Le}).then((function(e){return e.data.filter((function(e){return Ye.includes(e.subtipo_actividad)}))})).catch((function(e){return console.log(e)}));case 7:r=e.sent;try{(a=Ue([].concat(Object(J.a)(n),Object(J.a)(r)))).gestores.forEach((function(e){t.includes(e)||t.push(e)})),d(a.ordenes),i([].concat(Object(J.a)(n),Object(J.a)(r))),v(t),I(De()(new Date).format("HH:mm")),O(!1)}catch(c){console.log(c)}case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){O(!0),setTimeout((function(){O(!1),console.log(t)}),1e3)}),[t]),Object(a.useEffect)((function(){S()}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)(et,{level:2,style:{marginTop:"1rem"},children:"Indicador Gestores Gpon"}),Object(r.jsx)(E.a,{style:{marginTop:"2rem",marginBottom:".5rem"},children:Object(r.jsx)(w.a,{sm:24,children:Object(r.jsx)($e,{data:l,loading:f,gestores:g})})}),Object(r.jsx)(E.a,{children:Object(r.jsxs)(w.a,{sm:24,children:[Object(r.jsx)(E.a,{children:g&&g.length>0?g.map((function(e,t){return Object(r.jsx)(w.a,{style:{margin:"1rem"},children:Object(r.jsx)(Ne.a,{title:e,value:o.length>0?o.filter((function(t){return"-"===t.tecnico?t.tecnico===e:void 0!==t.tecnico&&t.tecnico.gestor&&t.tecnico.gestor.nombre?t.tecnico.gestor.nombre===e:(console.log(t,"-"===t.tecnico),!1)})).length:0,suffix:"/ ".concat(o.length," total")})},t)})):null}),Object(r.jsx)(E.a,{children:Object(r.jsx)(C.a,{onClick:S,children:"Click"})})]})})]})})),nt=function(e){Object(ye.a)(n,e);var t=Object(Ce.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(z.a)(n,[{key:"render",value:function(){return console.log("holas"),Object(r.jsx)("div",{children:"hola"})}}]),n}(a.Component),rt=["#1890ff","#2fc25b","#facc14","#14E9FA","#FF8818","#4618FF","#6DF719","#C018FF","#18B7FF","#F4A460","#6495ED","#00CED1","#1890ff","#2fc25b","#facc14","#14E9FA","#FF8818","#4618FF","#6DF719","#C018FF","#18B6FF","#F4A460","#6495ED","#00CED1"];function at(e){var t=e.data,n=e.loading,a=e.gestores;return n?Object(r.jsx)("div",{children:"cargando..."}):Object(r.jsxs)(Ge.Chart,{height:450,data:t,autoFit:!0,padding:[20,5,10,255],children:[Object(r.jsx)(Ge.Legend,{visible:!1}),Object(r.jsx)(Ge.Tooltip,{showMarkers:!0}),Object(r.jsx)(Ge.Axis,{name:"ordenes"}),Object(r.jsx)(Ge.Facet,{fields:["gestor"],type:"rect",columnTitle:{offsetY:-15,style:{fontSize:11,fontWeight:300,fill:"#8d8d8d"}},eachView:function(e,t){e.coordinate().transpose(),0===t.columnIndex?(e.axis("motivo",{tickLine:null,line:null}),e.axis("ordenes",!1)):e.axis(!1);var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e||0!==t.length){var n=t.findIndex((function(t){return t===e}));return n>-1?rt[n]:"#fff"}return"#fff"}(t.columnValue,a);e.interval().adjust("stack").position("motivo*ordenes").color("type",[n,"#ebedf0"]).size(20).label("ordenes*type",(function(e,t){return 2===t?null:{offset:e<3?3:-4}})),e.interaction("element-active")}})]})}var ct=ve.a.Title,ot=["Cancelado","No Realizada"],it=c.a.memo((function(){var e=Object(a.useState)([]),t=Object(Y.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),i=Object(Y.a)(o,2),s=i[0],u=i[1],l=Object(a.useState)(!1),d=Object(Y.a)(l,2),j=d[0],b=d[1],f=Object(a.useState)([]),O=Object(Y.a)(f,2),p=O[0],h=O[1],g=Object(a.useState)(null),v=Object(Y.a)(g,2),_=(v[0],v[1]);function y(){return I.apply(this,arguments)}function I(){return(I=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,Be(!1,{tipo:ze}).then((function(e){return e.data.filter((function(e){return Ye.includes(e.subtipo_actividad)&&ot.includes(e.estado)}))})).then((function(e){return c(e),qe(e)})).then((function(e){var t=e.ordenes,n=e.gestores;h(n.filter((function(e){return"-"!==e}))),u(t.filter((function(e){return"-"!==e.gestor&&e.motivo}))),console.log(t),_(De()(new Date).format("HH:mm"))})).catch((function(e){return console.log(e)})).finally((function(){return b(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){y()}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)(ct,{level:2,style:{marginTop:"1rem"},children:"Indicador Devoluciones Gpon"}),Object(r.jsx)(E.a,{style:{marginTop:"2rem",marginBottom:".5rem"},children:Object(r.jsx)(w.a,{sm:24,children:Object(r.jsx)(at,{data:s,loading:j,gestores:p})})}),Object(r.jsx)(E.a,{children:Object(r.jsxs)(w.a,{sm:24,children:[Object(r.jsx)(E.a,{children:p&&p.length>0?p.map((function(e,t){return Object(r.jsx)(w.a,{style:{margin:"1rem"},children:Object(r.jsx)(Ne.a,{title:e,value:n.length>0?n.filter((function(t){return console.log(t),"-"===t.tecnico?t.tecnico===e:!(void 0===t.tecnico||!t.tecnico.gestor||!t.tecnico.gestor.nombre)&&t.tecnico.gestor.nombre===e})).length:0,suffix:"/ ".concat(n.filter((function(e){return"-"!==e.tecnico&&e.motivo_no_realizado})).length," total")})},t)})):null}),Object(r.jsx)(E.a,{children:Object(r.jsx)(C.a,{onClick:y,children:"Click"})})]})})]})}));var st=n(66),ut=n(484),lt=n(165),dt=n(513),jt=function(){var e=Object(x.a)(m.a.mark((function e(t,n){var r,a,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.metodo,a=n.page,c=n.limit,o=n.idFiltro,e.abrupt("return",D({url:"empleados",method:"GET",params:{metodo:r,page:a,limit:c,idFiltro:o}},t));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),bt=function(){var e=Object(x.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D({url:"empleados/buscar",method:"GET",params:{value:t,field:n}},!0));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ft=function(){var e=Object(x.a)(m.a.mark((function e(t,n){var r,a,c,o,i,s,u,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,a=n.metodo,c=n.cargo,o=n.fecha_baja,i=n.estado_empresa,s=n.gestor,u=n.auditor,l=n.tecnicos,e.abrupt("return",D({url:"empleados",method:"PATCH",data:{id:r,metodo:a,cargo:c,fecha_baja:o,estado_empresa:i,gestor:s,auditor:u,tecnicos:l}},t));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ot=function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D({url:"empleados",method:"POST",data:t},!0));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pt=function(){var e=Object(x.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D({url:"empleados/"+t,method:"PUT",data:n},!0));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ht=y.a.Search;var mt=n(264),xt=n(514),gt=n(515),vt=n(516),Et={success:"#52c41a",error:"#EB2F2F",warning:"#F8C82E"};function wt(e){switch(e.cargo){case b.ADMINISTRADOR:return Object(r.jsx)(mt.a,{color:"geekblue",children:"Administrador"});case b.JEFE_OPERACIONES:return Object(r.jsx)(mt.a,{color:"blue",children:"Jefe de Operaciones"});case b.JEFE_LOGISTICA:return Object(r.jsx)(mt.a,{color:"cyan",children:"Jefe de Logistica"});case b.LIDER_GESTION:return Object(r.jsx)(mt.a,{color:"purple",children:"Lider de Gestion"});case b.ASISTENTE_LOGISTICA:return Object(r.jsx)(mt.a,{color:"green",children:"Asistente de Logistica"});case b.JEFE_CONTRATA:return Object(r.jsx)(mt.a,{color:"orange",children:"Jefe de Contrata"});case b.GESTOR:return Object(r.jsx)(mt.a,{color:"magenta",children:"Gestor"});case b.ALMACENERO:return Object(r.jsx)(mt.a,{color:"red",children:"Almacenero"});case b.AUDITOR:return Object(r.jsx)(mt.a,{color:"gold",children:"Auditor"});case b.TECNICO:return Object(r.jsx)(mt.a,{color:"volcano",children:"Tecnico"});default:return Object(r.jsx)(mt.a,{children:"Sin cargo"})}}function _t(e){var t=e.estado;switch(t){case"Activo":return Object(r.jsx)(mt.a,{icon:Object(r.jsx)(xt.a,{}),color:Et.success,children:t});case"Suspendido":return Object(r.jsx)(mt.a,{icon:Object(r.jsx)(gt.a,{}),color:Et.warning,children:t});case"Inactivo":return Object(r.jsx)(mt.a,{icon:Object(r.jsx)(vt.a,{}),color:Et.error,children:t});default:return Object(r.jsx)(mt.a,{children:"Desconocido"})}}var yt=n(518),Ct=n(519),It=n(130),St=n(491),Tt=It.a.Option;var At=function(e){var t=e.accion,n=e.visible,c=e.setVisible,o=e.empleado,i=void 0===o?{}:o,u=e.contratas,l=void 0===u?[]:u,d=e.guardar,j=Object(a.useState)({numero_documento:Number(Date.now())}),f=Object(Y.a)(j,2),O=f[0],p=f[1],h=_.a.useForm(),g=Object(Y.a)(h,1)[0];return Object(a.useEffect)((function(){i._id&&p(Object(s.a)(Object(s.a)({},i),{},{email:i.usuario.email,cargo:i.usuario.cargo,contrata:i.contrata&&i.contrata._id}))}),[i]),Object(r.jsx)(St.a,{width:300,cancelText:"Cancelar",okText:"Guardar",title:"crear"===t?"Crear Empleado":"Editar Empleado",visible:n,onOk:function(){g.validateFields().then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p({numero_documento:Date.now()}),g.resetFields(),n=Object(s.a)(Object(s.a)({},t),{},{usuario:{email:t.email,cargo:t.cargo}}),e.next=5,d(n);case 5:c(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("Validate Failed:",e)}))},onCancel:function(){c(!1)},destroyOnClose:!0,centered:!0,children:Object(r.jsxs)(_.a,{name:"form_empleado",layout:"vertical",size:"small",form:g,initialValues:O,onValuesChange:function(e){return p(Object(s.a)(Object(s.a)({},O),e))},children:[Object(r.jsx)(_.a.Item,{name:"nombre",label:"Nombre",rules:[{required:!0}],children:Object(r.jsx)(y.a,{})}),Object(r.jsx)(_.a.Item,{name:"apellidos",label:"Apellidos",rules:[{required:!0}],children:Object(r.jsx)(y.a,{})}),Object(r.jsx)(_.a.Item,{name:"email",label:"Correo",rules:[{required:!0,type:"email"}],children:Object(r.jsx)(y.a,{})}),Object(r.jsx)(_.a.Item,{name:"cargo",label:"Cargo",rules:[{required:!0,type:"number"}],children:Object(r.jsxs)(It.a,{placeholder:"Seleccionar cargo",onChange:function(e){return p(Object(s.a)(Object(s.a)({},O),{},{cargo:e}))},allowClear:!0,children:[Object(r.jsx)(Tt,{value:b.ASISTENTE_LOGISTICA,children:"Asistente de Logistica"}),Object(r.jsx)(Tt,{value:b.JEFE_CONTRATA,children:"Jefe de Contrata"}),Object(r.jsx)(Tt,{value:b.GESTOR,children:"Gestor"}),Object(r.jsx)(Tt,{value:b.ALMACENERO,children:"Almacenero"}),Object(r.jsx)(Tt,{value:b.AUDITOR,children:"Auditor"}),Object(r.jsx)(Tt,{value:b.TECNICO,children:"Tecnico"})]})}),O.cargo&&(O.cargo===b.TECNICO||O.cargo===b.AUDITOR)?Object(r.jsx)(_.a.Item,{name:"carnet",label:"Carnet",rules:[{required:!0}],children:Object(r.jsx)(y.a,{})}):null,l&&l.length>0?Object(r.jsx)(_.a.Item,{name:"contrata",label:"Contrata",rules:[{required:!0}],children:Object(r.jsx)(It.a,{placeholder:"Seleccionar contrata",onChange:function(e){return p(Object(s.a)(Object(s.a)({},O),{},{contrata:e}))},allowClear:!0,children:l.map((function(e,t){return Object(r.jsx)(Tt,{value:e._id,children:e.nombre},t)}))})}):null,Object(r.jsx)(_.a.Item,{name:"tipo_documento",label:"Tipo de Documento",children:Object(r.jsxs)(It.a,{placeholder:"Seleccionar tipo",onChange:function(e){return p(Object(s.a)(Object(s.a)({},O),{},{tipo_documento:e}))},allowClear:!0,children:[Object(r.jsx)(Tt,{value:"DNI",children:"DNI"}),Object(r.jsx)(Tt,{value:"Otro",children:"Otro"})]})}),Object(r.jsx)(_.a.Item,{name:"numero_documento",label:"Numero de Documento",rules:[{required:!1,type:"string"}],children:Object(r.jsx)(y.a,{})})]})})},kt=n(517),Nt="listaTodo",Rt="listaTecnicosGlobal",Dt="listaGestores",Ft="listaAuditores",Gt="resetPassword",Mt="cerrarSesion",Lt="actualizarPermisos",zt="activarCuenta",Pt="editarEstadoEmpresa",Bt="actualizarGestor",Ht="actualizarAuditor",Yt="listaTodo",Vt="listaNombres",Ut="subirData",qt="cruzarData",Kt="ordenesHoy",Jt="listarTodo",Wt=It.a.Option;var Qt=function(e){var t=e.visible,n=e.setVisible,c=(e.listarEmpleados,e.id),o=Object(a.useState)(4),i=Object(Y.a)(o,2),s=i[0],u=i[1];function l(){return(l=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft(!0,{id:c,metodo:Lt,cargo:s}).then((function(){return n(!t)})).catch((function(e){n(!1),console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)(St.a,{title:"Actualizar Cargo",visible:t,width:300,onOk:function(){return l.apply(this,arguments)},onCancel:function(){return n(!1)},centered:!0,children:[Object(r.jsx)("p",{style:{fontSize:"13px",color:"rgba(0,0,0,.55)"},children:"*Recuerda que no es posible otorgar un cargo superior al tuyo y que todo cambio quedar\xe1 registrado en el sistema."}),Object(r.jsx)("p",{children:"Seleccionar Cargo:"}),Object(r.jsxs)(It.a,{defaultValue:s,onChange:function(e){return u(e)},style:{width:180},children:[Object(r.jsx)(Wt,{value:b.LIDER_GESTION,children:"Lider de Gestion"}),Object(r.jsx)(Wt,{value:b.ASISTENTE_LOGISTICA,children:"Asistente de Logistica"}),Object(r.jsx)(Wt,{value:b.JEFE_CONTRATA,children:"Jefe de contrata"}),Object(r.jsx)(Wt,{value:b.GESTOR,children:"Gestor"}),Object(r.jsx)(Wt,{value:b.ALMACENERO,children:"Almacenero"}),Object(r.jsx)(Wt,{value:b.AUDITOR,children:"Auditor"}),Object(r.jsx)(Wt,{value:b.TECNICO,children:"Tecnico"})]})]})},Zt=n(498),Xt=n(485),$t=It.a.Option;var en=function(e){var t=e.visible,n=e.setVisible,c=e.listarEmpleados,o=e.id,i=Object(a.useState)(1),s=Object(Y.a)(i,2),u=s[0],l=s[1],d=Object(a.useState)(""),j=Object(Y.a)(d,2),b=j[0],f=j[1];function O(){return(O=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft(!0,{id:o,metodo:Pt,fecha_baja:b,estado_empresa:u}).then(Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!1),e.next=3,c();case 3:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)(St.a,{title:"Estado Empresa",visible:t,width:300,onOk:function(){return O.apply(this,arguments)},onCancel:function(){return n(!1)},centered:!0,children:[Object(r.jsx)("p",{style:{fontSize:"13px",color:"rgba(0,0,0,.55)"},children:'*Un usuario "Activo" tiene la cuenta habilitada y aparece en las listas del personal (ordenes, inventario, etc.)'}),Object(r.jsx)("p",{style:{fontSize:"13px",color:"rgba(0,0,0,.55)"},children:'*Un usuario "Suspendido" no podr\xe1 iniciar sesi\xf3n en el sistema, pero seguir\xe1 apareciendo en las listas del personal (ordenes, inventario, etc.)'}),Object(r.jsx)("p",{style:{fontSize:"13px",color:"rgba(0,0,0,.55)"},children:'*Un usuario "Inactivo" no podr\xe1 iniciar sesi\xf3n en el sistema y desaparecer\xe1 por completo de las listas del sistema (usuario de baja)'}),Object(r.jsxs)(Zt.b,{direction:"vertical",children:["Seleccionar:",Object(r.jsxs)(It.a,{defaultValue:u,onChange:function(e){return l(e)},style:{width:150},children:[Object(r.jsx)($t,{value:1,children:"Activo"}),Object(r.jsx)($t,{value:2,children:"Suspendido"}),Object(r.jsx)($t,{value:3,children:"Inactivo"})]}),"Fecha de suspensi\xf3n / baja:",Object(r.jsx)(Xt.a,{onChange:function(e,t){return f(t)}})]})]})};var tn=function(e){var t=e.visible,n=e.setVisible,c=e.id,o=e.listarEmpleados,i=Object(a.useState)(!1),s=Object(Y.a)(i,2),u=s[0],l=s[1],d=Object(a.useState)(!1),j=Object(Y.a)(d,2),b=j[0],f=j[1];function O(e){return p.apply(this,arguments)}function p(){return(p=Object(x.a)(m.a.mark((function e(r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft(!0,{id:c,metodo:r}).then((function(){o(),n(!t)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:n(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(St.a,{title:"Configuraciones",visible:t,width:250,onOk:h,onCancel:function(){return n(!1)},centered:!0,children:[Object(r.jsx)(C.a,{block:!0,icon:Object(r.jsx)(S.a,{}),style:{marginBottom:".5rem"},onClick:function(){return O(Gt)},children:"Reiniciar Contrase\xf1a"}),Object(r.jsx)(C.a,{block:!0,icon:Object(r.jsx)(vt.a,{}),style:{marginBottom:".5rem"},onClick:function(){return O(Mt)},children:"Cerrar Sessi\xf3n"}),Object(r.jsx)(C.a,{block:!0,icon:Object(r.jsx)(kt.a,{}),style:{marginBottom:".5rem"},onClick:function(){return l(!u)},children:"Permisos"}),Object(r.jsx)(C.a,{block:!0,icon:Object(r.jsx)(I.a,{}),style:{marginBottom:".5rem"},onClick:function(){return O(zt)},children:"Activar Cuenta"}),Object(r.jsx)(C.a,{block:!0,danger:!0,icon:Object(r.jsx)(gt.a,{}),style:{marginBottom:".5rem"},onClick:function(){return f(!b)},children:"Cambiar Estado"}),Object(r.jsx)(Qt,{visible:u,setVisible:l,listarEmpleados:o,id:c}),Object(r.jsx)(en,{visible:b,setVisible:f,listarEmpleados:o,id:c})]})};function nn(e){var t=e.id,n=e.empleado,c=e.listarEmpleados,o=e.listaContratas,i=Object(a.useState)(!1),s=Object(Y.a)(i,2),u=s[0],l=s[1],d=Object(a.useState)(!1),j=Object(Y.a)(d,2),b=j[0],f=j[1];function O(){return(O=Object(x.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt(t,n).then(Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)("span",{children:[Object(r.jsx)(yt.a,{title:"Editar",twoToneColor:Et.warning,style:{paddingRight:"8px",fontSize:"1.5rem"},onClick:function(){return l(!0)}}),Object(r.jsx)(Ct.a,{title:"Configuraciones",style:{paddingRight:"8px",fontSize:"1.5rem"},onClick:function(){return f(!0)}}),Object(r.jsx)(At,{accion:"editar",empleado:n,contratas:o,visible:u,setVisible:l,guardar:function(e){return O.apply(this,arguments)}}),Object(r.jsx)(tn,{visible:b,setVisible:f,listarEmpleados:c,id:t})]})}var rn=function(){var e=Object(x.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D({url:"contratas",method:"GET",params:{metodo:n}},t));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),an=function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D({url:"contratas",method:"POST",data:t},!0));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cn=function(){var e=Object(x.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D({url:"contratas/"+t,method:"PUT",data:n},!0));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),on=function(){var e=Object(x.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D({url:"contratas/"+t,method:"PATCH",data:n},!0));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),sn=n(495),un=ve.a.Text;var ln=function(e){var t=e.visible,n=e.abrirModal,a=e.empleado,c=void 0===a?{}:a;return Object(r.jsx)(St.a,{width:450,cancelText:"Cancelar",okText:"Aceptar",title:"Detalle del Usuario",visible:t,onOk:n,onCancel:n,destroyOnClose:!0,centered:!0,children:Object(r.jsxs)(sn.a,{layout:"vertical",bordered:!0,size:"small",column:2,children:[c.gestor&&Object(r.jsx)(sn.a.Item,{label:"Gestor:",children:c.gestor.nombre&&c.gestor.nombre}),Object(r.jsx)(sn.a.Item,{label:"Tipo de Doc.:",children:c.tipo_documento}),Object(r.jsx)(sn.a.Item,{label:"Numero de Doc.:",children:Object(r.jsx)(un,{copyable:!0,children:c.numero_documento})}),Object(r.jsx)(sn.a.Item,{label:"Fecha de Nacimiento:",children:c.fecha_nacimiento&&De()(c.fecha_nacimiento).format("DD-MM-YYYY")}),c.fecha_ingreso&&Object(r.jsx)(sn.a.Item,{label:"Fecha de Ingreso",children:De()(c.fecha_ingreso).format("DD-MM-YYYY")}),c.fecha_baja&&Object(r.jsx)(sn.a.Item,{label:"Fecha de Baja",children:De()(c.fecha_baja).format("DD-MM-YYYY")}),Object(r.jsx)(sn.a.Item,{label:"Nacionalidad",children:c.nacionalidad?c.nacionalidad:"-"}),Object(r.jsx)(sn.a.Item,{label:"Observaci\xf3n",span:2,children:c.observacion})]})})},dn=ve.a.Text;function jn(){var e=Object(a.useState)(1),t=Object(Y.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(20),i=Object(Y.a)(o,2),s=i[0],u=i[1],l=Object(a.useState)(1),d=Object(Y.a)(l,2),j=d[0],b=d[1],f=Object(a.useState)([]),O=Object(Y.a)(f,2),p=O[0],h=O[1],g=Object(a.useState)(!1),v=Object(Y.a)(g,2),E=v[0],w=v[1],_=Object(a.useState)(!1),y=Object(Y.a)(_,2),I=y[0],S=y[1],T=Object(a.useState)({}),A=Object(Y.a)(T,2),k=A[0],N=A[1],R=Object(a.useState)([]),D=Object(Y.a)(R,2),F=D[0],G=D[1],M=Object(a.useState)(!1),L=Object(Y.a)(M,2),z=L[0],P=L[1];function B(){return H.apply(this,arguments)}function H(){return(H=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,jt(!0,{metodo:Nt,page:n,limit:s}).then((function(e){var t=e.data;h(t.docs),b(t.totalDocs),P(!1)})).catch((function(e){P(!1),console.log(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rn(!1,Vt).then((function(e){var t=e.data;return G(t)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot(t).then(Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){B(),function(){V.apply(this,arguments)}()}),[n,s]);var q=function(){return w(!E)},K=function(){return S(!I)},J=[{title:"#",width:50,render:function(e,t,n){return n+1}},{title:"Nombre",dataIndex:"nombre",width:150},{title:"Apellidos",dataIndex:"apellidos",width:150,ellipsis:{showTitle:!1},render:function(e){return Object(r.jsx)(st.a,{placement:"topLeft",title:e,children:e})}},{title:"Email",dataIndex:"usuario",width:200,ellipsis:{showTitle:!1},render:function(e){return Object(r.jsx)(st.a,{placement:"topLeft",title:e&&e.email,children:e&&e.email})}},{title:"Cargo",dataIndex:"usuario",width:150,render:function(e){return Object(r.jsx)(wt,{cargo:e.cargo})}},{title:"Contrata",dataIndex:"contrata",width:200,ellipsis:{showTitle:!1},render:function(e){return Object(r.jsx)(st.a,{placement:"topLeft",title:e&&e.nombre,children:e&&e.nombre})}},{title:"Carnet",dataIndex:"carnet",width:150,render:function(e){return e?Object(r.jsx)(dn,{copyable:!0,children:e}):null}},{title:"Estado",dataIndex:"estado_empresa",width:150,render:function(e){return Object(r.jsx)(_t,{estado:e})}},{title:"Acciones",dataIndex:"_id",align:"center",width:100,render:function(e,t){return Object(r.jsx)(nn,{id:e,empleado:t,listarEmpleados:B,listaContratas:F})}}];return Object(r.jsxs)(ke,{children:[Object(r.jsx)(ut.a,{rowKey:"_id",onRow:function(e){return{onDoubleClick:function(){return N(e),void K()}}},className:"tabla-personal",title:function(){return function(e,t,n,c,o){var i=Object(a.useState)("nombre"),s=Object(Y.a)(i,2),u=s[0],l=s[1];function d(){return(d=Object(x.a)(m.a.mark((function e(r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>1)){e.next=5;break}return e.next=3,bt(r,u).then((function(e){var t=e.data;t.length>0&&(n(t),c(1),o(t.length))})).catch((function(e){return console.log(e)}));case 3:e.next=7;break;case 5:return e.next=7,t();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)("div",{className:"header-tabla",children:[Object(r.jsxs)("div",{className:"busqueda",children:[Object(r.jsxs)(lt.a.Group,{onChange:function(e){return l(e.target.value)},value:u,style:{paddingTop:".22rem"},children:[Object(r.jsx)(lt.a,{value:"nombre",children:"Nombre"}),Object(r.jsx)(lt.a,{value:"numero_documento",children:"Documento"}),Object(r.jsx)(lt.a,{value:"carnet",children:"Carnet"})]}),Object(r.jsx)(ht,{placeholder:"Buscar personal",allowClear:!0,enterButton:!1,onSearch:function(e){return d.apply(this,arguments)},style:{width:200,margin:0}})]}),Object(r.jsx)("div",{className:"boton-agregar",children:Object(r.jsx)(C.a,{icon:Object(r.jsx)(dt.a,{}),onClick:e,children:"Agregar"})})]})}(q,B,h,c,b)},columns:J,dataSource:p,loading:z,size:"small",scroll:{x:"1250px",y:"65vh"},pagination:{current:n,total:j,defaultPageSize:s,pageSizeOptions:[10,20,50,100],onChange:function(e){return c(e)},onShowSizeChange:function(e,t){return u(t)}}}),Object(r.jsx)(At,{accion:"crear",contratas:F,visible:E,setVisible:w,guardar:function(e){return U.apply(this,arguments)}}),Object(r.jsx)(ln,{visible:I,abrirModal:K,empleado:k})]})}var bn=n(520);var fn=function(e){var t=e.visible,n=e.setVisible,c=e.accion,o=e.guardar,i=e.contrata,s=void 0===i?{}:i,u=Object(a.useState)(null),l=Object(Y.a)(u,2),d=l[0],j=l[1],b=Object(a.useState)(null),f=Object(Y.a)(b,2),O=f[0],p=f[1],h=Object(a.useState)(null),g=Object(Y.a)(h,2),v=g[0],E=g[1],w=Object(a.useState)(null),_=Object(Y.a)(w,2),C=_[0],I=_[1];Object(a.useEffect)((function(){s.nombre&&(j(s.nombre),p(s.ruc),E(s.fecha_incorporacion),I(s.observacion))}),[s]);var S=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(null),p(null),E(null),I(null),n(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({nombre:d,ruc:O,fecha_incorporacion:v&&v,observacion:C&&C},s.id);case 2:S();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(St.a,{width:270,cancelText:"Cancelar",okText:"Guardar",title:"crear"===c?"Crear Contrata":"Editar Contrata",visible:t,onOk:T,onCancel:S,destroyOnClose:!0,centered:!0,children:[Object(r.jsx)("p",{children:"Nombre de Contrata:"}),Object(r.jsx)(y.a,{placeholder:"Nombre de Contrata",defaultValue:d,onChange:function(e){return j(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("p",{children:"RUC:"}),Object(r.jsx)(y.a,{placeholder:"RUC",defaultValue:O,onChange:function(e){return p(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("p",{children:"Fecha de Incorporaci\xf3n:"}),Object(r.jsx)(Xt.a,{defaultValue:v&&De.a.utc(v),onChange:function(e,t){return E(t)}}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("p",{children:"Observacion:"}),Object(r.jsx)(y.a,{placeholder:"Observacion",defaultValue:C,onChange:function(e){return I(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{})]})};var On=function(e){var t=e.visible,n=e.setVisible,c=e.guardar,o=e.contrata,i=void 0===o?{}:o,s=Object(a.useState)(!0),u=Object(Y.a)(s,2),l=u[0],d=u[1],j=Object(a.useState)(null),b=Object(Y.a)(j,2),f=b[0],O=b[1];function p(){return(p=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i._id){e.next=6;break}return e.next=3,c(i._id,{activo:l,fecha_baja:f});case 3:h(),e.next=7;break;case 6:console.log("objeto contrata vacio.");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(){d(!0),O(null),n(!1)};return Object(r.jsx)(St.a,{width:250,cancelText:"Cancelar",okText:"Guardar",title:"Desactivar Contrata",visible:t,onOk:function(){return p.apply(this,arguments)},onCancel:h,destroyOnClose:!0,centered:!0,children:Object(r.jsxs)(Zt.b,{direction:"vertical",children:[Object(r.jsx)("p",{style:{fontSize:"13px",color:"rgba(0,0,0,.55)"},children:"*La contrata no se eliminar\xe1 de la base de datos, pero si dejar\xe1 de aparecer en las listas del sistema."}),"Seleccionar estado:",Object(r.jsxs)(lt.a.Group,{onChange:function(e){return d(e.target.value)},value:l,children:[Object(r.jsx)(lt.a,{value:!0,children:"Activo"}),Object(r.jsx)(lt.a,{value:!1,children:"Inactivo"})]}),"Seleccionar fecha de baja:",Object(r.jsx)(Xt.a,{onChange:function(e,t){return O(t)}})]})})};function pn(){var e=Object(a.useState)(!1),t=Object(Y.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),i=Object(Y.a)(o,2),s=i[0],u=i[1],l=Object(a.useState)(!1),d=Object(Y.a)(l,2),j=d[0],b=d[1],f=Object(a.useState)(!1),O=Object(Y.a)(f,2),p=O[0],h=O[1],g=Object(a.useState)(!1),v=Object(Y.a)(g,2),E=v[0],w=v[1],_=Object(a.useState)({}),y=Object(Y.a)(_,2),I=y[0],S=y[1];function T(){return A.apply(this,arguments)}function A(){return(A=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,rn(!0,Yt).then((function(e){var t=e.data;c(!1),u(t&&t)})).catch((function(e){c(!1),console.log(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,an(t).then(Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e),D()}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I._id){e.next=3;break}return e.next=3,cn(I._id,t).then(Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e),F()}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(x.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,on(t,n).then(Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e),G()}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){T()}),[]);var D=function(){return b(!j)},F=function(){return h(!p)},G=function(){return w(!E)},M=[{title:"#",width:50,render:function(e,t,n){return n+1}},{title:"Nombre",dataIndex:"nombre",width:250},{title:"Estado",dataIndex:"activo",width:150,render:function(e){return e?Object(r.jsx)(mt.a,{color:"success",children:"Activo"}):Object(r.jsx)(mt.a,{color:"error",children:"Inactivo"})}},{title:"Fecha Inicio",dataIndex:"fecha_incorporacion",width:150,render:function(e){return e?De()(e).format("DD-MM-YYYY"):"-"}},{title:"Fecha Baja",dataIndex:"fecha_baja",width:150,render:function(e){return e?De()(e).format("DD-MM-YYYY"):"-"}},{title:"Observaci\xf3n",dataIndex:"observacion"},{title:"Acciones",dataIndex:"_id",align:"center",width:100,render:function(e,t){return Object(r.jsxs)("span",{children:[Object(r.jsx)(yt.a,{title:"Editar",twoToneColor:Et.warning,style:{paddingRight:"8px",fontSize:"1.5rem"},onClick:function(){F(),S(t)}}),Object(r.jsx)(bn.a,{title:"Configuraciones",twoToneColor:Et.error,style:{paddingRight:"8px",fontSize:"1.5rem"},onClick:function(){G(),S(t)}})]})}}];return Object(r.jsxs)(ke,{children:[Object(r.jsx)(ut.a,{rowKey:"_id",style:{marginBottom:"1rem"},className:"tabla-personal",title:function(){return Object(r.jsx)(C.a,{icon:Object(r.jsx)(dt.a,{}),onClick:D,children:"Agregar"})},columns:M,dataSource:s,loading:n,size:"small",scroll:{y:"65vh"},pagination:!1}),Object(r.jsx)(fn,{visible:j,setVisible:b,guardar:function(e){return k.apply(this,arguments)},accion:"crear"}),Object(r.jsx)(fn,{visible:p,setVisible:h,guardar:function(e){return N.apply(this,arguments)},contrata:I,accion:"editar"}),Object(r.jsx)(On,{visible:E,setVisible:w,guardar:function(e,t){return R.apply(this,arguments)},contrata:I})]})}var hn=[{path:f.listaPersonal,exact:!0,component:function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(Ae,{titulo:"Lista de Personal",subtitulo:"Usuarios y Personal"}),Object(r.jsx)(jn,{})]})},nivel:O.todos},{path:f.listaContratas,exact:!0,component:function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(Ae,{titulo:"Lista de Contratas",subtitulo:"Usuarios y Personal"}),Object(r.jsx)(pn,{})]})},nivel:O.listaContratas}],mn=n(487),xn=n(523),gn=n(524),vn=n(521);function En(){return wn.apply(this,arguments)}function wn(){return(wn=Object(x.a)(m.a.mark((function e(){var t,n,r,a=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:[],n=a.length>1?a[1]:void 0,r=a.length>2&&void 0!==a[2]&&a[2],e.abrupt("return",new Promise((function(e,a){if(0===t.length)return e([]);var c=[],o=!1;try{return t.forEach((function(e){void 0!==e[n]&&null!==e[n]&&e[n]._id&&null!==e[n]._id?-1===c.findIndex((function(t){return t.value===e[n]._id}))&&c.push({text:r?e[n].nombre+" "+e[n].apellidos:e[n].nombre,value:e[n]._id}):o=!0})),e(o?[].concat(c,[{text:"-",value:"-"}]):c)}catch(i){return a(i)}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _n(){return yn.apply(this,arguments)}function yn(){return(yn=Object(x.a)(m.a.mark((function e(){var t,n,r=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:[],n=r.length>1?r[1]:void 0,e.abrupt("return",new Promise((function(e,r){if(0===t.length)return e([]);var a=[];try{return t.forEach((function(e){void 0!==e[n]&&null!==e[n]&&(-1===a.findIndex((function(t){return t.value===e[n]}))&&a.push({text:e[n],value:e[n]}))})),e(a)}catch(c){return r(c)}})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cn=It.a.Option;var In=function(e){var t=e.gestores,n=void 0===t?[]:t,c=e.loadingGestores,o=e.auditores,i=void 0===o?[]:o,s=e.loadingAuditores,u=Object(a.useState)([]),l=Object(Y.a)(u,2),d=l[0],j=l[1],b=Object(a.useState)(!1),f=Object(Y.a)(b,2),O=f[0],p=f[1],h=Object(a.useState)(!1),g=Object(Y.a)(h,2),v=g[0],E=g[1],w=Object(a.useState)(!1),_=Object(Y.a)(w,2),y=_[0],I=_[1],S=Object(a.useState)([]),T=Object(Y.a)(S,2),A=T[0],k=T[1],N=Object(a.useState)(null),R=Object(Y.a)(N,2),D=R[0],F=R[1],G=Object(a.useState)(null),M=Object(Y.a)(G,2),L=M[0],z=M[1],P=Object(a.useState)([]),B=Object(Y.a)(P,2),H=B[0],V=B[1],U=Object(a.useState)([]),q=Object(Y.a)(U,2),K=q[0],J=q[1],W=Object(a.useState)([]),Q=Object(Y.a)(W,2),Z=Q[0],X=Q[1];function $(){return ee.apply(this,arguments)}function ee(){return(ee=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,jt(!0,{metodo:Rt}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.data)&&(En(n,"contrata").then((function(e){return V(e)})),En(n,"gestor",!0).then((function(e){return J(e)})),En(n,"auditor",!0).then((function(e){return X(e)})),j(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)})).finally((function(){return p(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return ne.apply(this,arguments)}function ne(){return(ne=Object(x.a)(m.a.mark((function e(){var t=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(t.length>0&&void 0!==t[0])||t[0])){e.next=12;break}if(!(A.length>0)){e.next=8;break}return E(!0),e.next=6,ft(!0,{metodo:Bt,gestor:D,tecnicos:A}).then(Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k([]),e.next=3,$();case 3:case"end":return e.stop()}}),e)})))).catch((function(e){k([]),console.log(e)})).finally((function(){return E(!1)}));case 6:e.next=9;break;case 8:console.log("no hay tecnicos seleccionado");case 9:e.next=19;break;case 12:if(!(L&&A.length>0)){e.next=18;break}return I(!0),e.next=16,ft(!0,{metodo:Ht,auditor:L,tecnicos:A}).then(Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k([]),e.next=3,$();case 3:case"end":return e.stop()}}),e)})))).catch((function(e){k([]),console.log(e)})).finally((function(){return I(!1)}));case 16:e.next=19;break;case 18:console.log("no hay tecnicos o auditor seleccionado");case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){$()}),[]);var re=[{title:"#",width:50,align:"center",render:function(e,t,n){return n+1}},{title:"Nombre",width:150,dataIndex:"nombre"},{title:"Apellidos",width:150,dataIndex:"apellidos"},{title:"Carnet",width:100,dataIndex:"carnet"},{title:"Contrata",width:150,dataIndex:"contrata",filters:H,onFilter:function(e,t){return"-"===e?!t.contrata:void 0!==t.contrata&&0===t.contrata._id.indexOf(e)},render:function(e){return e.nombre&&e.nombre}},{title:"Gestor",width:150,dataIndex:"gestor",filters:K,onFilter:function(e,t){return"-"===e?!t.gestor:void 0!==t.gestor&&null!==t.gestor&&0===t.gestor._id.indexOf(e)},render:function(e){return e&&e.nombre&&e.apellidos?e.nombre+" "+e.apellidos:"-"}},{title:"Auditor",width:150,dataIndex:"auditor",filters:Z,onFilter:function(e,t){return"-"===e?!t.auditor:void 0!==t.auditor&&0===t.auditor._id.indexOf(e)},render:function(e){return e&&e.nombre&&e.apellidos?e.nombre+" "+e.apellidos:"-"}}];return Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:"Asignar Gestor:"}),Object(r.jsx)(It.a,{showSearch:!0,placeholder:"Buscar por nombre",loading:c,defaultValue:D,onChange:function(e){return F(e)},style:{width:300,marginBottom:".5rem",marginRight:".5rem"},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:n.length>0?n.map((function(e,t){return Object(r.jsx)(Cn,{value:e._id,children:"".concat(e.nombre," ").concat(e.apellidos)},t)})):Object(r.jsx)(Cn,{children:"Sin data"})}),Object(r.jsx)(C.a,{icon:v?Object(r.jsx)(vn.a,{spin:!0}):Object(r.jsx)(xt.a,{}),onClick:te,children:"Asignar"}),Object(r.jsx)("p",{children:"Asignar Auditor:"}),Object(r.jsx)(It.a,{showSearch:!0,placeholder:"Buscar por nombre",loading:s,defaultValue:L,onChange:function(e){return z(e)},style:{width:300,marginBottom:".5rem",marginRight:".5rem"},filterOption:function(e,t){return console.log(e,t),t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:i.length>0?i.map((function(e,t){return Object(r.jsx)(Cn,{value:e._id,children:"".concat(e.nombre," ").concat(e.apellidos)},t)})):Object(r.jsx)(Cn,{children:"Sin data"})}),Object(r.jsx)(C.a,{icon:y?Object(r.jsx)(vn.a,{spin:!0}):Object(r.jsx)(xt.a,{}),onClick:function(){return te(!1)},children:"Asignar"}),Object(r.jsx)(ut.a,{rowKey:"_id",size:"small",dataSource:d,loading:O,columns:re,rowSelection:{columnWidth:30,selectedRowKeys:A,onChange:function(e){return k(e)}},pagination:{defaultPageSize:20,pageSizeOptions:[20,50,100]},scroll:{y:"60vh"}})]})},Sn=n(522),Tn=function(){var e=Object(x.a)(m.a.mark((function e(t){var n,r,a,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.metodo,r=t.page,a=t.limit,c=t.fecha_inicio,o=t.fecha_fin,e.abrupt("return",D({url:"asistencia",method:"GET",params:{metodo:n,page:r,limit:a,fecha_inicio:c,fecha_fin:o}},!0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),An=n(117);function kn(){return Nn.apply(this,arguments)}function Nn(){return(Nn=Object(x.a)(m.a.mark((function e(){var t,n=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:[],e.abrupt("return",new Promise((function(e,n){try{var r=[];return 0===t.length||t.forEach((function(e){if(r.length>0){var t=r.findIndex((function(t){return t.nombre===e.tecnico.nombre&&t.apellidos===e.tecnico.apellidos}));if(-1!==t&&e.createdAt){var n=r[t],a=De()(e.createdAt).format("DD-MM");r[t]=Object(s.a)(Object(s.a)({},n),{},Object(An.a)({},a,{estado:e.estado,observacion:e.observacion,iniciado:e.iniciado,fecha_iniciado:e.fecha_iniciado}))}else{var c=De()(e.createdAt).format("DD-MM"),o=Object(An.a)({_id:e._id,nombre:e.tecnico.nombre,apellidos:e.tecnico.apellidos,gestor:{nombre:void 0!==e.tecnico.gestor&&null!==e.tecnico.gestor?e.tecnico.gestor.nombre+" "+e.tecnico.gestor.apellidos:"-",_id:void 0!==e.tecnico.gestor&&null!==e.tecnico.gestor?e.tecnico.gestor._id:"-"},auditor:{nombre:void 0!==e.tecnico.auditor?e.tecnico.auditor.nombre+" "+e.tecnico.auditor.apellidos:"-",_id:void 0!==e.tecnico.auditor?e.tecnico.auditor._id:"-"},observacion:e.observacion},c,{estado:e.estado,observacion:e.observacion,iniciado:e.iniciado,fecha_iniciado:e.fecha_iniciado});r.push(o)}}else{var i=De()(e.createdAt).format("DD-MM");r=[Object(An.a)({_id:e._id,nombre:e.tecnico.nombre,apellidos:e.tecnico.apellidos,gestor:{nombre:void 0!==e.tecnico.gestor?e.tecnico.gestor.nombre+" "+e.tecnico.gestor.apellidos:"-",_id:void 0!==e.tecnico.gestor?e.tecnico.gestor._id:"-"},auditor:{nombre:void 0!==e.tecnico.auditor?e.tecnico.auditor.nombre+" "+e.tecnico.auditor.apellidos:"-",_id:void 0!==e.tecnico.auditor?e.tecnico.auditor._id:"-"},observacion:e.observacion},i,{estado:e.estado,observacion:e.observacion,iniciado:e.iniciado,fecha_iniciado:e.fecha_iniciado})]}})),e(r)}catch(a){return n(a)}})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rn={FALTA:"F",ASISTIO:"A",DESCANSO:"D",PERMISO:"P",SUSPENDIDO:"S",DESCANSO_MEDICO:"DM",EXAMEN_MEDICO:"EM"};var Dn=function(e){var t=e.estado;switch(t){case Rn.FALTA:return Object(r.jsx)(mt.a,{color:"error",children:t});case Rn.ASISTIO:return Object(r.jsx)(mt.a,{color:"success",children:t});case Rn.DESCANSO:return Object(r.jsx)(mt.a,{color:"gold",children:t});case Rn.PERMISO:return Object(r.jsx)(mt.a,{color:"blue",children:t});case Rn.SUSPENDIDO:return Object(r.jsx)(mt.a,{color:"warning",children:t});case Rn.DESCANSO_MEDICO:return Object(r.jsx)(mt.a,{color:"geekblue",children:t});case Rn.EXAMEN_MEDICO:return Object(r.jsx)(mt.a,{color:"purple",children:t});default:return Object(r.jsx)(mt.a,{children:"-"})}},Fn=[{title:"#",width:50,align:"center",render:function(e,t,n){return n+1}},{title:"Tecnico",width:200},{title:"Gestor",width:200},{title:"Fecha",width:100}];function Gn(){var e=Object(a.useState)(null),t=Object(Y.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(null),i=Object(Y.a)(o,2),s=i[0],u=i[1],l=Object(a.useState)([]),d=Object(Y.a)(l,2),j=d[0],b=d[1],f=Object(a.useState)(Fn),O=Object(Y.a)(f,2),p=O[0],h=O[1],g=Object(a.useState)([]),v=Object(Y.a)(g,2),_=v[0],y=v[1],I=Object(a.useState)(!1),S=Object(Y.a)(I,2),T=S[0],A=S[1],k=Object(a.useState)([]),N=Object(Y.a)(k,2),R=N[0],D=N[1],F=Object(a.useState)([]),G=Object(Y.a)(F,2),M=G[0],L=G[1],z=Object(a.useState)({total:0,activas:0}),P=Object(Y.a)(z,2),B=P[0],H=P[1];function V(){return(V=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!s){e.next=4;break}return A(!0),e.next=4,Tn({metodo:Jt,page:1,limit:20,fecha_inicio:n,fecha_fin:s}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,e.next=3,kn(n.filter((function(e){return null!==e.tecnico})));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){y(e),En(e,"gestor",!0).then((function(e){return D(e)})),En(e,"auditor",!0).then((function(e){return L(e)})),U(e)})).catch((function(e){return console.log(e)})).finally((function(){return A(!1)}));case 4:case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){var t=0,n=0,r=De()().format("DD-MM");e.length>0&&e.forEach((function(e){e[r]&&e[r].estado&&(t+=1,e[r].iniciado&&(n+=1))})),H({total:t,activas:n})}return Object(a.useEffect)((function(){!function(){var e=De()().format("DD-MM");if(j.length>0){var t=[{title:"#",width:50,align:"center",render:function(e,t,n){return n+1}},{title:"Tecnico",dataIndex:"nombre",width:300,render:function(e,t){return t.nombre+" "+t.apellidos}},{title:"Gestor",dataIndex:"gestor",filters:R,onFilter:function(e,t){return!(!t.gestor||!e)&&0===t.gestor._id.indexOf(e)},width:250,render:function(e){return e.nombre?e.nombre:"-"}},{title:"Auditor",dataIndex:"auditor",filters:M,onFilter:function(e,t){return!(!t.auditor||!e)&&0===t.auditor._id.indexOf(e)},width:250,render:function(e){return e.nombre?e.nombre:"-"}},{title:"En Ruta",dataIndex:e,width:150,align:"center",filters:[{text:"Ok",value:!0},{text:"No",value:!1}],onFilter:function(t,n){return!!n[e]&&(!n[e].iniciado&&!t||n[e].iniciado===t)},render:function(e){return e?e.iniciado?Object(r.jsx)(be.a,{content:e.fecha_iniciado?De()(e.fecha_iniciado).format("HH:mm"):"-",title:"Observaciones",trigger:"click",children:Object(r.jsx)("button",{className:"boton-none",children:Object(r.jsx)(mt.a,{color:Et.success,children:Object(r.jsx)(xt.a,{})})})}):Object(r.jsx)(mt.a,{color:Et.error,children:Object(r.jsx)(vt.a,{})}):Object(r.jsx)(mt.a,{color:Et.error,children:"No"})}}],n=j.map((function(e){return{title:e,width:100,align:"center",dataIndex:e,render:function(e){return e&&e.estado&&e.observacion&&"-"!==e.observacion?Object(r.jsx)(be.a,{content:e.observacion,title:"Observaciones",trigger:"click",children:Object(r.jsx)("button",{className:"boton-none",children:Object(r.jsx)(Dn,{estado:e.estado})})}):Object(r.jsx)(Dn,{estado:e&&e.estado?e.estado:"-"})}}}));h([].concat(t,Object(J.a)(n)))}else h([])}()}),[j,R]),Object(r.jsxs)("div",{children:[Object(r.jsxs)(E.a,{children:[Object(r.jsxs)(w.a,{sm:24,style:{marginBottom:".5rem"},children:[Object(r.jsx)("p",{style:{color:"rgba(0,0,0,0.45)"},children:"Seleccionar Fecha:"}),Object(r.jsx)(Xt.a,{onChange:function(e){if(e){var t=e.clone().startOf("week"),n=e.clone().endOf("week");c(De()(t).format("YYYY-MM-DD")),u(De()(n).format("YYYY-MM-DD"));for(var r=[],a=0;a<=6;a++)r.push(De()(t).add(a,"days").format("DD-MM"));b(r)}else c(null),u(null)},picker:"week",style:{marginRight:".5rem"}}),Object(r.jsx)(C.a,{disabled:T,icon:T?Object(r.jsx)(vn.a,{spin:!0}):Object(r.jsx)(Sn.a,{}),onClick:function(){return V.apply(this,arguments)},children:"Actualizar"})]}),Object(r.jsx)(w.a,{sm:6,style:{marginBottom:"1rem",marginRight:".5rem"},children:Object(r.jsx)(Ne.a,{title:"Semana selecionada",value:n&&s?"".concat(De()(n).format("DD-MM")," / ").concat(De()(s).format("DD-MM")):"-"})}),Object(r.jsx)(w.a,{children:Object(r.jsx)(Ne.a,{title:"Rutas Activas (Hoy)",value:B.activas,suffix:"/ ".concat(B.total)})})]}),Object(r.jsx)(ut.a,{rowKey:"_id",size:"small",loading:T,columns:p,dataSource:_,pagination:{defaultPageSize:20}})]})}var Mn=mn.a.TabPane;var Ln=[{path:f.listaRutas,exact:!0,component:function(){var e=Object(a.useState)([]),t=Object(Y.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),i=Object(Y.a)(o,2),s=i[0],u=i[1],l=Object(a.useState)([]),d=Object(Y.a)(l,2),j=d[0],b=d[1],f=Object(a.useState)(!1),O=Object(Y.a)(f,2),p=O[0],h=O[1];function g(){return(g=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,jt(!1,{metodo:Dt}).then((function(e){var t=e.data;t&&c([].concat(Object(J.a)(t),[{_id:null,nombre:"-",apellidos:""}]))})).catch((function(e){return console.log(e)})).finally((function(){return u(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,jt(!1,{metodo:Ft}).then((function(e){var t=e.data;t&&b(t)})).catch((function(e){return console.log(e)})).finally((function(){return h(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){g.apply(this,arguments)}(),function(){v.apply(this,arguments)}()}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)(Ae,{titulo:"Lista de Rutas",subtitulo:"Operativa"}),Object(r.jsx)(ke,{children:Object(r.jsxs)(mn.a,{style:{paddingLeft:"1rem"},animated:!1,children:[Object(r.jsx)(Mn,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(xn.a,{}),"Asignar Rutas"]}),children:Object(r.jsx)(In,{gestores:n,loadingGestores:s,auditores:j,loadingAuditores:p})},"1"),Object(r.jsx)(Mn,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(gn.a,{}),"Asistencia"]}),children:Object(r.jsx)(Gn,{})},"2")]})})]})},nivel:O.administrarOrdenes}],zn=n(530),Pn={TIPO:"averiashfc",CODIGO_ZONAL:"codofcadm",CODIGO_REQUERIMIENTO:"codreq",CODIGO_CLIENTE:"codcli",NOMBRE_CLIENTE:"nomcli",CODIGO_CTR:"codctr",DESCRIPCION_CTR:"desnomctr",CODIGO_NODO:"codnod",CODIGO_TROBA:"nroplano",DISTRITO:"desdtt",destipvia:"destipvia",desnomvia:"desnomvia",numvia:"numvia",despis:"despis",desint:"desint",desmzn:"desmzn",deslot:"deslot",destipurb:"destipurb",desurb:"desurb",FECHA_REGISTRO:"fec_regist",CODIGO_MOTIVO:"codmotv",DETALLE_MOTIVO:"desmotv",TIPO_REQUERIMIENTO:"tipreqfin",DETALLE_TRABAJO:"desobsordtrab",TELEFONO_CONTACTO:"tel_cont_cc",TELEFONO_REFERENCIA:"tel_cont_ref_cc",NUMERO_REITERADA:"numaverei",TIPO_TECNOLOGIA:"tiptecnologia"},Bn=n(486),Hn=n(525),Yn=n(526),Vn=n(188);function Un(){return(Un=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){try{var r=new FileReader,a=!!r.readAsBinaryString;r.onload=function(t){var n=t.target.result,r=Vn.read(n,{type:a?"binary":"array",bookVBA:!0}),c=r.SheetNames[0],o=r.Sheets[c],i=Vn.utils.sheet_to_json(o),s=[];return i.map((function(e){return s.push(Object.keys(e).reduce((function(t,n){return t[n.trim().toLowerCase()]=e[n],t}),{}))})),e(s)},a?r.readAsBinaryString(t):r.readAsArrayBuffer(t)}catch(c){return n(c)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qn(e,t){var n=new Date(86400*(e-25569)*1e3);return t?n:new Date(n.setHours(n.getHours()+5))}var Kn=n(189),Jn=n.n(Kn),Wn=["470","476"];function Qn(){return Zn.apply(this,arguments)}function Zn(){return(Zn=Object(x.a)(m.a.mark((function e(){var t,n,r=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:[],n=t.filter((function(e){return Wn.includes(String(e[Pn.CODIGO_CTR]))})).map((function(e,t){var n=!0;return Jn()(e[Pn.TELEFONO])&&(n=!1),Jn()(String(e[Pn.DISTRITO]).trim())&&(n=!1),isNaN(e[Pn.CODIGO_REQUERIMIENTO])&&(n=!1),{key:t,verificado:n,tipo:Pn.TIPO,codigo_zonal:void 0!==e[Pn.CODIGO_ZONAL]&&e[Pn.CODIGO_ZONAL],codigo_requerimiento:void 0!==e[Pn.CODIGO_REQUERIMIENTO]&&e[Pn.CODIGO_REQUERIMIENTO],codigo_cliente:void 0!==e[Pn.CODIGO_CLIENTE]&&e[Pn.CODIGO_CLIENTE],nombre_cliente:void 0!==e[Pn.NOMBRE_CLIENTE]&&e[Pn.NOMBRE_CLIENTE],codigo_ctr:void 0!==e[Pn.CODIGO_CTR]&&e[Pn.CODIGO_CTR],descripcion_ctr:void 0!==e[Pn.DESCRIPCION_CTR]&&e[Pn.DESCRIPCION_CTR],codigo_nodo:void 0!==e[Pn.CODIGO_NODO]&&e[Pn.CODIGO_NODO],codigo_troba:void 0!==e[Pn.CODIGO_TROBA]&&e[Pn.CODIGO_TROBA],distrito:void 0!==e[Pn.DISTRITO]&&e[Pn.DISTRITO],direccion:(void 0!==e[Pn.destipvia]?e[Pn.destipvia]:"")+(void 0!==e[Pn.desnomvia]?" "+e[Pn.desnomvia]:"")+(void 0!==e[Pn.numvia]?" "+e[Pn.numvia]:"")+(void 0!==e[Pn.despis]?" "+e[Pn.despis]:"")+(void 0!==e[Pn.desint]?" Int. "+e[Pn.desint]:"")+(void 0!==e[Pn.desmzn]?" Mz. "+e[Pn.desmzn]:"")+(void 0!==e[Pn.deslot]?" Lt. "+e[Pn.deslot]:"")+(void 0!==e[Pn.destipurb]?" "+e[Pn.destipurb]:"")+(void 0!==e[Pn.desurb]?" "+e[Pn.desurb]:""),fecha_registro:!isNaN(Number(e[Pn.FECHA_REGISTRO]))&&qn(e[Pn.FECHA_REGISTRO]),codigo_motivo:void 0!==e[Pn.CODIGO_MOTIVO]&&e[Pn.CODIGO_MOTIVO],detalle_motivo:void 0!==e[Pn.DETALLE_MOTIVO]&&e[Pn.DETALLE_MOTIVO].replace(/,/g,""),tipo_requerimiento:void 0!==e[Pn.TIPO_REQUERIMIENTO]&&e[Pn.TIPO_REQUERIMIENTO],detalle_trabajo:void 0!==e[Pn.DETALLE_TRABAJO]&&e[Pn.DETALLE_TRABAJO].replace(/,/g,""),telefono_contacto:void 0!==e[Pn.TELEFONO_CONTACTO]&&e[Pn.TELEFONO_CONTACTO],telefono_referencia:void 0!==e[Pn.TELEFONO_REFERENCIA]&&e[Pn.TELEFONO_REFERENCIA],numero_reiterada:void 0!==e[Pn.NUMERO_REITERADA]&&e[Pn.NUMERO_REITERADA],tipo_tecnologia:void 0!==e[Pn.TIPO_TECNOLOGIA]&&e[Pn.TIPO_TECNOLOGIA]}})),e.abrupt("return",Promise.all(n).catch((function(e){return console.log("Error en la promesa"),console.log(e),e})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xn(e,t,n){return $n.apply(this,arguments)}function $n(){return($n=Object(x.a)(m.a.mark((function e(t,n,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next=e.t0===Pn.TIPO?3:10;break;case 3:if(1!==r){e.next=9;break}return e.next=6,Qn(t);case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",!1);case 10:return e.abrupt("break",11);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var er=function(e){var t=e.tipoOrden,n=Object(a.useState)(1),c=Object(Y.a)(n,2),o=c[0],i=c[1],s=Object(a.useState)("done"),u=Object(Y.a)(s,2),l=u[0],d=u[1],j=Object(a.useState)(""),b=Object(Y.a)(j,2),f=b[0],O=b[1],p=Object(a.useState)([]),h=Object(Y.a)(p,2),g=h[0],v=h[1],_=Object(a.useState)(!1),y=Object(Y.a)(_,2),I=y[0],S=y[1];function T(){return(T=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==g.length){e.next=4;break}k.a.warn("No hay ordenes para subir.",{position:"top-right"}),e.next=8;break;case 4:return S(!0),e.next=7,He({metodo:Ut,ordenes:g}).then(Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.a.info("Sincronizando ordenes con TOA...",{position:"top-right"}),e.next=3,Pe(!0,{metodo:qt,tipo:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)}));case 7:S(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){d("done"),O(""),v([])}),[o]),Object(r.jsx)("div",{children:Object(r.jsxs)(E.a,{children:[Object(r.jsxs)(w.a,{sm:10,md:10,lg:12,xl:12,spellCheck:!0,children:[Object(r.jsx)("p",{children:"Tipo de Archivo:"}),Object(r.jsxs)(lt.a.Group,{onChange:function(e){return i(e.target.value)},value:o,children:[Object(r.jsx)(lt.a,{value:1,children:"Pendientes"}),Object(r.jsx)(lt.a,{value:2,children:"Liquidadas"})]}),Object(r.jsx)("div",{style:{width:"14rem",margin:"1rem 0"},children:Object(r.jsx)(Bn.a,{accept:".xls,.xlsx",beforeUpload:function(e){return d("uploading"),O(e.name),N.formatosAdmitidos.includes(e.type)?(function(e){return Un.apply(this,arguments)}(e).then(function(){var e=Object(x.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xn(n,t,o).then((function(e){d("done"),v(e),k.a.success("".concat(e.length," Ordenes encontradas."),{position:"top-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){d("error"),k.a.error("Error convirtiendo el archivo",{position:"top-right"}),console.log(e)})),!1):(d("error"),k.a.warn("Formato Incorrecto.",{position:"top-right"}),!1)},onRemove:function(){O(""),d("done"),v([])},fileList:[{uid:"-1",name:f,status:l}],children:Object(r.jsxs)(C.a,{children:[Object(r.jsx)(Hn.a,{})," ","Subir Archivo"]})})})]}),Object(r.jsxs)(w.a,{sm:14,md:14,lg:12,xl:12,children:[Object(r.jsx)(Ne.a,{title:"Ordenes",value:g.length}),Object(r.jsx)(C.a,{style:{marginTop:".5rem"},type:"primary",icon:I?Object(r.jsx)(vn.a,{spin:!0}):Object(r.jsx)(Yn.a,{}),onClick:function(){return T.apply(this,arguments)},children:"Guardar"})]})]})})},tr=n(527),nr=n(528),rr=n(529);function ar(e){return e.charAt(0).toUpperCase()+e.slice(1)}var cr=function(e){var t=e.estado;switch(t){case"cancelado":return Object(r.jsx)(mt.a,{children:ar(t)});case"completado":return Object(r.jsx)(mt.a,{color:"success",children:ar(t)});case"iniciado":return Object(r.jsx)(mt.a,{color:"geekblue",children:ar(t)});case"no realizada":return Object(r.jsx)(mt.a,{color:"magenta",children:ar(t)});case"pendiente":return Object(r.jsx)(mt.a,{color:"orange",children:ar(t)});case"suspendido":return Object(r.jsx)(mt.a,{color:"red",children:ar(t)});default:return Object(r.jsx)(mt.a,{children:"-"})}},or=ve.a.Text;function ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return[{title:"#",width:50,render:function(e,t,n){return n+1}},{title:"Requerimiento",dataIndex:"codigo_requerimiento",width:120,render:function(e){return Object(r.jsx)(or,{copyable:!0,children:e})}},{title:"CTR",dataIndex:"codigo_ctr",width:60},{title:"Nodo",dataIndex:"codigo_nodo",width:60},{title:"Troba",dataIndex:"codigo_troba",width:70,sorter:function(e,t){return e.codigo_troba<t.codigo_troba?-1:e.codigo_troba>t.codigo_troba?1:0}},{title:"Reiterada",dataIndex:"numero_reiterada",width:100,align:"center",sorter:function(e,t){return e.numero_reiterada-t.numero_reiterada},render:function(e){return e?Object(r.jsx)(mt.a,{color:"#E5302F",children:e}):"-"}},{title:"Distrito",dataIndex:"distrito",width:160,filters:e||[],onFilter:function(e,t){return 0===t.distrito.indexOf(e)}},{title:"Bucket",dataIndex:"bucket",width:200,ellipsis:{showTitle:!1},filters:t||[],onFilter:function(e,t){return 0===t.bucket.indexOf(e)},render:function(e){return Object(r.jsx)(st.a,{placement:"topLeft",title:e,children:e})}},{title:"Estado",dataIndex:"estado_toa",width:150,align:"center",filters:n||[],onFilter:function(e,t){return 0===t.estado_toa.indexOf(e)},render:function(e){return Object(r.jsx)(cr,{estado:e})}},{title:"Contrata",dataIndex:"contrata",width:200,ellipsis:{showTitle:!1},filters:a||[],onFilter:function(e,t){return"-"===e?!t.contrata:void 0!==t.contrata&&0===t.contrata._id.indexOf(e)},render:function(e){return Object(r.jsx)(st.a,{placement:"topLeft",title:e?e.nombre:"-",children:e?e.nombre:"-"})}},{title:"Gestor",dataIndex:"gestor",width:200,ellipsis:{showTitle:!1},filters:c||[],onFilter:function(e,t){return"-"===e?!t.gestor:void 0!==t.gestor&&0===t.gestor._id.indexOf(e)},render:function(e){return Object(r.jsx)(st.a,{placement:"topLeft",title:e?e.nombre+" "+e.apellidos:"-",children:e?e.nombre+" "+e.apellidos:"-"})}},{title:"Fecha Registro",dataIndex:"fecha_registro",width:150,render:function(e){return e?De()(e).format("DD/MM/YY HH:mm"):"-"}},{title:"Horas",dataIndex:"fecha_registro",width:80,align:"center",render:function(e){return e?Object(r.jsx)(mt.a,{children:De()().diff(e,"hours")}):Object(r.jsx)(mt.a,{children:"-"})}}]}var sr=function(e){e.gestores,e.contratas;var t=e.tipo,n=Object(a.useState)([]),c=Object(Y.a)(n,2),o=c[0],i=c[1],s=Object(a.useState)(!1),u=Object(Y.a)(s,2),l=u[0],d=u[1],j=Object(a.useState)(!1),b=Object(Y.a)(j,2),f=b[0],O=b[1],p=Object(a.useState)([]),h=Object(Y.a)(p,2),g=h[0],v=h[1],E=Object(a.useState)([]),w=Object(Y.a)(E,2),_=w[0],y=w[1],I=Object(a.useState)([]),S=Object(Y.a)(I,2),T=S[0],A=S[1],k=Object(a.useState)([]),N=Object(Y.a)(k,2),R=N[0],D=N[1],F=Object(a.useState)([]),G=Object(Y.a)(F,2),M=G[0],L=G[1],z=Object(a.useState)([]),P=Object(Y.a)(z,2),B=P[0],H=P[1];function V(){return U.apply(this,arguments)}function U(){return(U=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,Pe(!0,{metodo:Kt}).then((function(e){var t=e.data;return i(t)})).catch((function(e){return console.log(e)})).finally((function(){return d(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,Pe(!0,{metodo:qt,tipo:t}).then((function(e){"success"===e.status&&V()})).catch((function(e){return console.log(e)})).finally((function(){return O(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){V()}),[]),Object(a.useEffect)((function(){o.length>0&&(_n(o,"distrito").then((function(e){return y(e)})),_n(o,"bucket").then((function(e){return A(e)})),_n(o,"estado_toa").then((function(e){return D(e)})),En(o,"contrata").then((function(e){return L(e)})),En(o,"gestor",!0).then((function(e){return H(e)})))}),[o]),Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(C.a,{type:"primary",icon:l?Object(r.jsx)(vn.a,{spin:!0}):Object(r.jsx)(Sn.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},onClick:V,children:"Actualizar"}),Object(r.jsx)(C.a,{icon:f?Object(r.jsx)(vn.a,{spin:!0}):Object(r.jsx)(tr.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},onClick:function(){return q.apply(this,arguments)},children:"Sincronizar"}),Object(r.jsx)(C.a,{icon:l?Object(r.jsx)(vn.a,{spin:!0}):Object(r.jsx)(nr.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},children:"Editar Bucket"}),Object(r.jsx)(C.a,{icon:l?Object(r.jsx)(vn.a,{spin:!0}):Object(r.jsx)(rr.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},children:"Asignar"})]}),Object(r.jsx)(ut.a,{rowKey:"_id",onRow:function(e){return{onDoubleClick:function(){return console.log(e)}}},rowSelection:{columnWidth:50,selectedRowKeys:g,onChange:function(e){return v(e)}},columns:ir(_,T,R,M,B),dataSource:o,loading:l,size:"small",scroll:{y:"65vh"},pagination:{defaultPageSize:50,pageSizeOptions:[50,100,200]}})]})},ur=mn.a.TabPane;var lr=[{path:f.adminAveriasHfc,exact:!0,component:function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(Ae,{titulo:"Administrar Ordenes",subtitulo:"Operativa"}),Object(r.jsx)(ke,{children:Object(r.jsxs)(mn.a,{style:{paddingLeft:"1rem"},animated:!1,children:[Object(r.jsx)(ur,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(zn.a,{}),"Actualizar Ordenes"]}),children:Object(r.jsx)(er,{tipoOrden:Pn.TIPO})},"1"),Object(r.jsx)(ur,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(xt.a,{}),"Lista de Ordenes"]}),children:Object(r.jsx)(sr,{tipo:Pn.TIPO})},"2"),Object(r.jsx)(ur,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(ee.a,{}),"Aprobar Ordenes"]})},"3")]})})]})},nivel:O.administrarOrdenes},{path:f.adminAltasHfc,exact:!0,component:function(){return Object(r.jsx)("div",{children:"administrar altas"})},nivel:O.administrarOrdenes},{path:f.adminBasicas,exact:!0,component:function(){return Object(r.jsx)("div",{children:"administrar basicas"})},nivel:O.administrarOrdenes},{path:f.adminspeedy,exact:!0,component:function(){return Object(r.jsx)("div",{children:"administrar speedy"})},nivel:O.administrarOrdenes}],dr=[].concat(Object(J.a)(Ln),Object(J.a)(lr)),jr=[{path:f.dashboard,exact:!0,nivel:[].concat(Object(J.a)(O.todos),[9]),component:function(){var e=Object(a.useState)(0),t=Object(Y.a)(e,2),n=t[0],c=t[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)(Ae,{titulo:"Dashboard",subtitulo:"Indicadores"}),Object(r.jsxs)(ke,{children:[Object(r.jsx)(We,{prueba:n%2===1?n:0}),Object(r.jsx)(Ze,{prueba:n%2===0?n:0}),Object(r.jsx)(tt,{prueba:n%2===0?n:0}),Object(r.jsx)(it,{}),Object(r.jsx)("button",{onClick:function(){return c(n+1)},children:"hola"}),Object(r.jsx)(nt,{})]})]})}}].concat(Object(J.a)(hn),Object(J.a)(dr)),br=n(265),fr=n(496);function Or(){return Object(r.jsx)(ke,{children:Object(r.jsx)(fr.a,{status:"403",title:"403",subTitle:"Lo sentimos, no tienes autorizacion para entrar a esta p\xe1gina.",extra:Object(r.jsx)(C.a,{type:"primary",onClick:function(){return window.location.pathname=f.dashboard},children:"Inicio"})})})}var pr=function(e){var t=e.component,n=e.nivel,c=void 0===n?[]:n,o=Object(br.a)(e,["component","nivel"]),i=Object(a.useState)(null),u=Object(Y.a)(i,2),d=u[0],j=u[1];return Object(a.useEffect)((function(){j(new B(v.a.get(N.TOKEN_STORAGE_KEY)).decodedToken)}),[c]),c.includes(0)||d&&c.includes(d.cargo)?Object(r.jsx)(l.a,Object(s.a)(Object(s.a)({},o),{},{render:function(e){return Object(r.jsx)(t,Object(s.a)({},e))}})):Object(r.jsx)(l.a,Object(s.a)(Object(s.a)({},o),{},{render:function(){return Object(r.jsx)(Or,{})}}))};function hr(){return Object(r.jsx)(d.b,{locale:j.a,children:Object(r.jsx)(u.a,{children:Object(r.jsxs)(l.c,{children:[Object(r.jsx)(l.a,{exact:!0,path:"/",component:p}),Object(r.jsx)(l.a,{exact:!0,path:f.login,component:H}),Object(r.jsx)(Se,{children:jr.map((function(e,t){return Object(r.jsx)(pr,{path:e.path,exact:e.exact,nivel:e.nivel,component:function(t){return Object(r.jsx)(e.component,Object(s.a)({},t))}},t)}))})]})})})}var mr=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function xr(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(Object(r.jsx)(hr,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");mr?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):xr(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):xr(t,e)}))}}()}},[[479,1,2]]]);
//# sourceMappingURL=main.c12fa2c0.chunk.js.map